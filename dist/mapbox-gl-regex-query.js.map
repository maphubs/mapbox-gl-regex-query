{"version":3,"sources":["node_modules/browser-pack/_prelude.js","node_modules/@mapbox/point-geometry/index.js","node_modules/@mapbox/vector-tile/index.js","node_modules/@mapbox/vector-tile/lib/vectortile.js","node_modules/@mapbox/vector-tile/lib/vectortilefeature.js","node_modules/@mapbox/vector-tile/lib/vectortilelayer.js","node_modules/ieee754/index.js","node_modules/mapbox-gl/src/util/vectortile_to_geojson.js","node_modules/pbf/index.js","src/feature_filter.js","src/index.js"],"names":["Point","x","y","this","module","exports","prototype","clone","add","p","_add","sub","_sub","multByPoint","_multByPoint","divByPoint","_divByPoint","mult","k","_mult","div","_div","rotate","a","_rotate","rotateAround","_rotateAround","matMult","m","_matMult","unit","_unit","perp","_perp","round","_round","mag","Math","sqrt","equals","other","dist","distSqr","dx","dy","angle","atan2","angleTo","b","angleWith","angleWithSep","cos","sin","convert","Array","isArray","VectorTile","require","VectorTileFeature","VectorTileLayer","pbf","end","layers","readFields","readTile","tag","layer","readVarint","pos","length","name","extent","keys","values","properties","type","_pbf","_geometry","_keys","_values","readFeature","feature","id","readTag","key","value","classifyRings","rings","len","polygon","ccw","polygons","i","area","signedArea","undefined","push","ring","p1","p2","sum","j","types","loadGeometry","line","cmd","lines","cmdLen","readSVarint","Error","bbox","x1","Infinity","x2","y1","y2","toGeoJSON","z","project","y0","size","x0","PI","atan","exp","pow","coords","points","result","geometry","coordinates","version","_features","readLayer","readString","readValueMessage","readFloat","readDouble","readVarint64","readBoolean","read","buffer","offset","isLE","mLen","nBytes","e","eLen","eMax","eBias","nBits","d","s","NaN","write","c","rt","abs","isNaN","floor","log","LN2","Feature","vectorTileFeature","_vectorTileFeature","_z","_x","_y","prototypeAccessors","get","set","g","toJSON","this$1","json","Pbf","buf","ArrayBuffer","isView","Uint8Array","readVarintRemainder","l","h","toNum","readPackedEnd","Bytes","low","high","isSigned","writeBigVarint","val","realloc","writeBigVarintLow","writeBigVarintHigh","lsb","makeRoomForExtraLength","startPos","extraLen","ceil","writePackedVarint","arr","writeVarint","writePackedSVarint","writeSVarint","writePackedFloat","writeFloat","writePackedDouble","writeDouble","writePackedBoolean","writeBoolean","writePackedFixed32","writeFixed32","writePackedSFixed32","writeSFixed32","writePackedFixed64","writeFixed64","writePackedSFixed64","writeSFixed64","readUInt32","writeInt32","readInt32","readUtf8","str","b0","bytesPerSequence","b1","b2","b3","String","fromCharCode","writeUtf8","lead","charCodeAt","ieee754","Varint","Fixed64","Fixed32","SHIFT_LEFT_32","SHIFT_RIGHT_32","destroy","readField","skip","readMessage","readFixed32","readSFixed32","readFixed64","readSFixed64","num","Boolean","readBytes","subarray","readPackedVarint","readPackedSVarint","readPackedBoolean","readPackedFloat","readPackedDouble","readPackedFixed32","readPackedSFixed32","readPackedFixed64","readPackedSFixed64","writeTag","min","finish","writeString","writeBytes","writeRawMessage","fn","obj","writeMessage","writeBytesField","writeFixed32Field","writeSFixed32Field","writeFixed64Field","writeSFixed64Field","writeVarintField","writeSVarintField","writeStringField","writeFloatField","writeDoubleField","writeBooleanField","createFilter","filter","Function","compile","const","op","compileComparisonOp","compileRegexOp","compileLogicalOp","slice","compileNegation","compileInOp","compileHasOp","compilePropertyReference","property","JSON","stringify","checkType","left","right","indexOf","expressions","map","join","sort","compare","expression","vt","Protobuf","GeoJSONFeature","featureFilter","querySourceFeatures","sourceID","params","let","sourceCache","style","sourceCaches","tiles","getRenderableIds","getTileByID","dataTiles","tile","dataID","tileID","canonical","queryTile","rawTileData","vtLayers","sourceLayer","_geojsonTileLayer","coord","overscaledZ","geojsonFeature"],"mappings":"AAAA;ACAA,YAgBA,SAASA,OAAMC,EAAGC,GACdC,KAAKF,EAAIA,EACTE,KAAKD,EAAIA,EAhBbE,OAAOC,QAAUL,MAmBjBA,MAAMM,WAOFC,MAAO,WAAa,MAAO,IAAIP,OAAMG,KAAKF,EAAGE,KAAKD,IAQlDM,IAAS,SAASC,GAAK,MAAON,MAAKI,QAAQG,KAAKD,IAQhDE,IAAS,SAASF,GAAK,MAAON,MAAKI,QAAQK,KAAKH,IAQhDI,YAAgB,SAASJ,GAAK,MAAON,MAAKI,QAAQO,aAAaL,IAQ/DM,WAAgB,SAASN,GAAK,MAAON,MAAKI,QAAQS,YAAYP,IAQ9DQ,KAAS,SAASC,GAAK,MAAOf,MAAKI,QAAQY,MAAMD,IAQjDE,IAAS,SAASF,GAAK,MAAOf,MAAKI,QAAQc,KAAKH,IAQhDI,OAAS,SAASC,GAAK,MAAOpB,MAAKI,QAAQiB,QAAQD,IASnDE,aAAe,SAASF,EAAEd,GAAK,MAAON,MAAKI,QAAQmB,cAAcH,EAAEd,IAOnEkB,QAAS,SAASC,GAAK,MAAOzB,MAAKI,QAAQsB,SAASD,IASpDE,KAAS,WAAa,MAAO3B,MAAKI,QAAQwB,SAQ1CC,KAAS,WAAa,MAAO7B,MAAKI,QAAQ0B,SAO1CC,MAAS,WAAa,MAAO/B,MAAKI,QAAQ4B,UAQ1CC,IAAK,WACD,MAAOC,MAAKC,KAAKnC,KAAKF,EAAIE,KAAKF,EAAIE,KAAKD,EAAIC,KAAKD,IASrDqC,OAAQ,SAASC,GACb,MAAOrC,MAAKF,IAAMuC,EAAMvC,GACjBE,KAAKD,IAAMsC,EAAMtC,GAQ5BuC,KAAM,SAAShC,GACX,MAAO4B,MAAKC,KAAKnC,KAAKuC,QAAQjC,KAUlCiC,QAAS,SAASjC,GACd,GAAIkC,GAAKlC,EAAER,EAAIE,KAAKF,EAChB2C,EAAKnC,EAAEP,EAAIC,KAAKD,CACpB,OAAOyC,GAAKA,EAAKC,EAAKA,GAQ1BC,MAAO,WACH,MAAOR,MAAKS,MAAM3C,KAAKD,EAAGC,KAAKF,IAQnC8C,QAAS,SAASC,GACd,MAAOX,MAAKS,MAAM3C,KAAKD,EAAI8C,EAAE9C,EAAGC,KAAKF,EAAI+C,EAAE/C,IAQ/CgD,UAAW,SAASD,GAChB,MAAO7C,MAAK+C,aAAaF,EAAE/C,EAAG+C,EAAE9C,IAUpCgD,aAAc,SAASjD,EAAGC,GACtB,MAAOmC,MAAKS,MACR3C,KAAKF,EAAIC,EAAIC,KAAKD,EAAID,EACtBE,KAAKF,EAAIA,EAAIE,KAAKD,EAAIA,IAG9B2B,SAAU,SAASD,GACf,GAAI3B,GAAI2B,EAAE,GAAKzB,KAAKF,EAAI2B,EAAE,GAAKzB,KAAKD,EAChCA,EAAI0B,EAAE,GAAKzB,KAAKF,EAAI2B,EAAE,GAAKzB,KAAKD,CAGpC,OAFAC,MAAKF,EAAIA,EACTE,KAAKD,EAAIA,EACFC,MAGXO,KAAM,SAASD,GAGX,MAFAN,MAAKF,GAAKQ,EAAER,EACZE,KAAKD,GAAKO,EAAEP,EACLC,MAGXS,KAAM,SAASH,GAGX,MAFAN,MAAKF,GAAKQ,EAAER,EACZE,KAAKD,GAAKO,EAAEP,EACLC,MAGXgB,MAAO,SAASD,GAGZ,MAFAf,MAAKF,GAAKiB,EACVf,KAAKD,GAAKgB,EACHf,MAGXkB,KAAM,SAASH,GAGX,MAFAf,MAAKF,GAAKiB,EACVf,KAAKD,GAAKgB,EACHf,MAGXW,aAAc,SAASL,GAGnB,MAFAN,MAAKF,GAAKQ,EAAER,EACZE,KAAKD,GAAKO,EAAEP,EACLC,MAGXa,YAAa,SAASP,GAGlB,MAFAN,MAAKF,GAAKQ,EAAER,EACZE,KAAKD,GAAKO,EAAEP,EACLC,MAGX4B,MAAO,WAEH,MADA5B,MAAKkB,KAAKlB,KAAKiC,OACRjC,MAGX8B,MAAO,WACH,GAAI/B,GAAIC,KAAKD,CAGb,OAFAC,MAAKD,EAAIC,KAAKF,EACdE,KAAKF,GAAKC,EACHC,MAGXqB,QAAS,SAASqB,GACd,GAAIM,GAAMd,KAAKc,IAAIN,GACfO,EAAMf,KAAKe,IAAIP,GACf5C,EAAIkD,EAAMhD,KAAKF,EAAImD,EAAMjD,KAAKD,EAC9BA,EAAIkD,EAAMjD,KAAKF,EAAIkD,EAAMhD,KAAKD,CAGlC,OAFAC,MAAKF,EAAIA,EACTE,KAAKD,EAAIA,EACFC,MAGXuB,cAAe,SAASmB,EAAOpC,GAC3B,GAAI0C,GAAMd,KAAKc,IAAIN,GACfO,EAAMf,KAAKe,IAAIP,GACf5C,EAAIQ,EAAER,EAAIkD,GAAOhD,KAAKF,EAAIQ,EAAER,GAAKmD,GAAOjD,KAAKD,EAAIO,EAAEP,GACnDA,EAAIO,EAAEP,EAAIkD,GAAOjD,KAAKF,EAAIQ,EAAER,GAAKkD,GAAOhD,KAAKD,EAAIO,EAAEP,EAGvD,OAFAC,MAAKF,EAAIA,EACTE,KAAKD,EAAIA,EACFC,MAGXgC,OAAQ,WAGJ,MAFAhC,MAAKF,EAAIoC,KAAKH,MAAM/B,KAAKF,GACzBE,KAAKD,EAAImC,KAAKH,MAAM/B,KAAKD,GAClBC,OAefH,MAAMqD,QAAU,SAAU9B,GACtB,MAAIA,aAAavB,OACNuB,EAEP+B,MAAMC,QAAQhC,GACP,GAAIvB,OAAMuB,EAAE,GAAIA,EAAE,IAEtBA;;ACtTXnB,OAAOC,QAAQmD,WAAaC,QAAQ,uBACpCrD,OAAOC,QAAQqD,kBAAoBD,QAAQ,8BAC3CrD,OAAOC,QAAQsD,gBAAkBF,QAAQ;;ACFzC,YAMA,SAASD,YAAWI,EAAKC,GACrB1D,KAAK2D,OAASF,EAAIG,WAAWC,YAAcH,GAG/C,QAASG,UAASC,EAAKH,EAAQF,GAC3B,GAAY,IAARK,EAAW,CACX,GAAIC,GAAQ,GAAIP,iBAAgBC,EAAKA,EAAIO,aAAeP,EAAIQ,IACxDF,GAAMG,SAAQP,EAAOI,EAAMI,MAAQJ,IAX/C,GAAIP,iBAAkBF,QAAQ,oBAE9BrD,QAAOC,QAAUmD;;ACJjB,YAMA,SAASE,mBAAkBE,EAAKC,EAAKU,EAAQC,EAAMC,GAE/CtE,KAAKuE,cACLvE,KAAKoE,OAASA,EACdpE,KAAKwE,KAAO,EAGZxE,KAAKyE,KAAOhB,EACZzD,KAAK0E,WAAa,EAClB1E,KAAK2E,MAAQN,EACbrE,KAAK4E,QAAUN,EAEfb,EAAIG,WAAWiB,YAAa7E,KAAM0D,GAGtC,QAASmB,aAAYf,EAAKgB,EAASrB,GACpB,GAAPK,EAAUgB,EAAQC,GAAKtB,EAAIO,aACf,GAAPF,EAAUkB,QAAQvB,EAAKqB,GAChB,GAAPhB,EAAUgB,EAAQN,KAAOf,EAAIO,aACtB,GAAPF,IAAUgB,EAAQJ,UAAYjB,EAAIQ,KAG/C,QAASe,SAAQvB,EAAKqB,GAGlB,IAFA,GAAIpB,GAAMD,EAAIO,aAAeP,EAAIQ,IAE1BR,EAAIQ,IAAMP,GAAK,CAClB,GAAIuB,GAAMH,EAAQH,MAAMlB,EAAIO,cACxBkB,EAAQJ,EAAQF,QAAQnB,EAAIO,aAChCc,GAAQP,WAAWU,GAAOC,GAkKlC,QAASC,eAAcC,GACnB,GAAIC,GAAMD,EAAMlB,MAEhB,IAAImB,GAAO,EAAG,OAAQD,EAMtB,KAAK,GAHDE,GACAC,EAFAC,KAIKC,EAAI,EAAGA,EAAIJ,EAAKI,IAAK,CAC1B,GAAIC,GAAOC,WAAWP,EAAMK,GACf,KAATC,QAEQE,KAARL,IAAmBA,EAAMG,EAAO,GAEhCH,IAAQG,EAAO,GACXJ,GAASE,EAASK,KAAKP,GAC3BA,GAAWF,EAAMK,KAGjBH,EAAQO,KAAKT,EAAMK,KAK3B,MAFIH,IAASE,EAASK,KAAKP,GAEpBE,EAGX,QAASG,YAAWG,GAEhB,IAAK,GAA2CC,GAAIC,EADhDC,EAAM,EACDR,EAAI,EAAGJ,EAAMS,EAAK5B,OAAQgC,EAAIb,EAAM,EAAWI,EAAIJ,EAAKa,EAAIT,IACjEM,EAAKD,EAAKL,GACVO,EAAKF,EAAKI,GACVD,IAAQD,EAAGlG,EAAIiG,EAAGjG,IAAMiG,EAAGhG,EAAIiG,EAAGjG,EAEtC,OAAOkG,GArOX,GAAIpG,OAAQyD,QAAQ,yBAEpBrD,QAAOC,QAAUqD,kBAkCjBA,kBAAkB4C,OAAS,UAAW,QAAS,aAAc,WAE7D5C,kBAAkBpD,UAAUiG,aAAe,WACvC,GAAI3C,GAAMzD,KAAKyE,IACfhB,GAAIQ,IAAMjE,KAAK0E,SAUf,KARA,GAMI2B,GANA3C,EAAMD,EAAIO,aAAeP,EAAIQ,IAC7BqC,EAAM,EACNpC,EAAS,EACTpE,EAAI,EACJC,EAAI,EACJwG,KAGG9C,EAAIQ,IAAMP,GAAK,CAClB,IAAKQ,EAAQ,CACT,GAAIsC,GAAS/C,EAAIO,YACjBsC,GAAe,EAATE,EACNtC,EAASsC,GAAU,EAKvB,GAFAtC,IAEY,IAARoC,GAAqB,IAARA,EACbxG,GAAK2D,EAAIgD,cACT1G,GAAK0D,EAAIgD,cAEG,IAARH,IACID,GAAME,EAAMV,KAAKQ,GACrBA,MAGJA,EAAKR,KAAK,GAAIhG,OAAMC,EAAGC,QAEpB,CAAA,GAAY,IAARuG,EAQP,KAAM,IAAII,OAAM,mBAAqBJ,EALjCD,IACAA,EAAKR,KAAKQ,EAAK,GAAGjG,UAU9B,MAFIiG,IAAME,EAAMV,KAAKQ,GAEdE,GAGXhD,kBAAkBpD,UAAUwG,KAAO,WAC/B,GAAIlD,GAAMzD,KAAKyE,IACfhB,GAAIQ,IAAMjE,KAAK0E,SAYf,KAVA,GAAIhB,GAAMD,EAAIO,aAAeP,EAAIQ,IAC7BqC,EAAM,EACNpC,EAAS,EACTpE,EAAI,EACJC,EAAI,EACJ6G,EAAKC,EAAAA,EACLC,GAAMD,EAAAA,EACNE,EAAKF,EAAAA,EACLG,GAAMH,EAAAA,EAEHpD,EAAIQ,IAAMP,GAAK,CAClB,IAAKQ,EAAQ,CACT,GAAIsC,GAAS/C,EAAIO,YACjBsC,GAAe,EAATE,EACNtC,EAASsC,GAAU,EAKvB,GAFAtC,IAEY,IAARoC,GAAqB,IAARA,EACbxG,GAAK2D,EAAIgD,cACT1G,GAAK0D,EAAIgD,cACL3G,EAAI8G,IAAIA,EAAK9G,GACbA,EAAIgH,IAAIA,EAAKhH,GACbC,EAAIgH,IAAIA,EAAKhH,GACbA,EAAIiH,IAAIA,EAAKjH,OAEd,IAAY,IAARuG,EACP,KAAM,IAAII,OAAM,mBAAqBJ,GAI7C,OAAQM,EAAIG,EAAID,EAAIE,IAGxBzD,kBAAkBpD,UAAU8G,UAAY,SAASnH,EAAGC,EAAGmH,GAQnD,QAASC,GAAQd,GACb,IAAK,GAAIH,GAAI,EAAGA,EAAIG,EAAKnC,OAAQgC,IAAK,CAClC,GAAI5F,GAAI+F,EAAKH,GAAIc,EAAK,IAAmB,KAAZ1G,EAAEP,EAAIqH,GAAYC,CAC/ChB,GAAKH,IACY,KAAZ5F,EAAER,EAAIwH,GAAYD,EAAO,IAC1B,IAAMnF,KAAKqF,GAAKrF,KAAKsF,KAAKtF,KAAKuF,IAAIT,EAAK9E,KAAKqF,GAAK,MAAQ,KAZtE,GAKI9B,GAAGS,EALHmB,EAAOrH,KAAKoE,OAASlC,KAAKwF,IAAI,EAAGR,GACjCI,EAAKtH,KAAKoE,OAAStE,EACnBsH,EAAKpH,KAAKoE,OAASrE,EACnB4H,EAAS3H,KAAKoG,eACd5B,EAAOjB,kBAAkB4C,MAAMnG,KAAKwE,KAaxC,QAAQxE,KAAKwE,MACb,IAAK,GACD,GAAIoD,KACJ,KAAKnC,EAAI,EAAGA,EAAIkC,EAAOzD,OAAQuB,IAC3BmC,EAAOnC,GAAKkC,EAAOlC,GAAG,EAE1BkC,GAASC,EACTT,EAAQQ,EACR,MAEJ,KAAK,GACD,IAAKlC,EAAI,EAAGA,EAAIkC,EAAOzD,OAAQuB,IAC3B0B,EAAQQ,EAAOlC,GAEnB,MAEJ,KAAK,GAED,IADAkC,EAASxC,cAAcwC,GAClBlC,EAAI,EAAGA,EAAIkC,EAAOzD,OAAQuB,IAC3B,IAAKS,EAAI,EAAGA,EAAIyB,EAAOlC,GAAGvB,OAAQgC,IAC9BiB,EAAQQ,EAAOlC,GAAGS,IAMR,IAAlByB,EAAOzD,OACPyD,EAASA,EAAO,GAEhBnD,EAAO,QAAUA,CAGrB,IAAIqD,IACArD,KAAM,UACNsD,UACItD,KAAMA,EACNuD,YAAaJ,GAEjBpD,WAAYvE,KAAKuE,WAOrB,OAJI,MAAQvE,QACR6H,EAAO9C,GAAK/E,KAAK+E,IAGd8C;;AC/LX,YAMA,SAASrE,iBAAgBC,EAAKC,GAE1B1D,KAAKgI,QAAU,EACfhI,KAAKmE,KAAO,KACZnE,KAAKoE,OAAS,KACdpE,KAAKkE,OAAS,EAGdlE,KAAKyE,KAAOhB,EACZzD,KAAK2E,SACL3E,KAAK4E,WACL5E,KAAKiI,aAELxE,EAAIG,WAAWsE,UAAWlI,KAAM0D,GAEhC1D,KAAKkE,OAASlE,KAAKiI,UAAU/D,OAGjC,QAASgE,WAAUpE,EAAKC,EAAON,GACf,KAARK,EAAYC,EAAMiE,QAAUvE,EAAIO,aACnB,IAARF,EAAWC,EAAMI,KAAOV,EAAI0E,aACpB,IAARrE,EAAWC,EAAMK,OAASX,EAAIO,aACtB,IAARF,EAAWC,EAAMkE,UAAUpC,KAAKpC,EAAIQ,KAC5B,IAARH,EAAWC,EAAMY,MAAMkB,KAAKpC,EAAI0E,cACxB,IAARrE,GAAWC,EAAMa,QAAQiB,KAAKuC,iBAAiB3E,IAG5D,QAAS2E,kBAAiB3E,GAItB,IAHA,GAAIyB,GAAQ,KACRxB,EAAMD,EAAIO,aAAeP,EAAIQ,IAE1BR,EAAIQ,IAAMP,GAAK,CAClB,GAAII,GAAML,EAAIO,cAAgB,CAE9BkB,GAAgB,IAARpB,EAAYL,EAAI0E,aACZ,IAARrE,EAAYL,EAAI4E,YACR,IAARvE,EAAYL,EAAI6E,aACR,IAARxE,EAAYL,EAAI8E,eACR,IAARzE,EAAYL,EAAIO,aACR,IAARF,EAAYL,EAAIgD,cACR,IAAR3C,EAAYL,EAAI+E,cAAgB,KAGxC,MAAOtD,GA/CX,GAAI3B,mBAAoBD,QAAQ,yBAEhCrD,QAAOC,QAAUsD,gBAiDjBA,gBAAgBrD,UAAU2E,QAAU,SAASW,GACzC,GAAIA,EAAI,GAAKA,GAAKzF,KAAKiI,UAAU/D,OAAQ,KAAM,IAAIwC,OAAM,8BAEzD1G,MAAKyE,KAAKR,IAAMjE,KAAKiI,UAAUxC,EAE/B,IAAI/B,GAAM1D,KAAKyE,KAAKT,aAAehE,KAAKyE,KAAKR,GAC7C,OAAO,IAAIV,mBAAkBvD,KAAKyE,KAAMf,EAAK1D,KAAKoE,OAAQpE,KAAK2E,MAAO3E,KAAK4E;;AC3D/E1E,QAAQuI,KAAO,SAAUC,EAAQC,EAAQC,EAAMC,EAAMC,GACnD,GAAIC,GAAGtH,EACHuH,EAAgB,EAATF,EAAaD,EAAO,EAC3BI,GAAQ,GAAKD,GAAQ,EACrBE,EAAQD,GAAQ,EAChBE,GAAS,EACT1D,EAAImD,EAAQE,EAAS,EAAK,EAC1BM,EAAIR,GAAQ,EAAI,EAChBS,EAAIX,EAAOC,EAASlD,EAOxB,KALAA,GAAK2D,EAELL,EAAIM,GAAM,IAAOF,GAAU,EAC3BE,KAAQF,EACRA,GAASH,EACFG,EAAQ,EAAGJ,EAAQ,IAAJA,EAAUL,EAAOC,EAASlD,GAAIA,GAAK2D,EAAGD,GAAS,GAKrE,IAHA1H,EAAIsH,GAAM,IAAOI,GAAU,EAC3BJ,KAAQI,EACRA,GAASN,EACFM,EAAQ,EAAG1H,EAAQ,IAAJA,EAAUiH,EAAOC,EAASlD,GAAIA,GAAK2D,EAAGD,GAAS,GAErE,GAAU,IAANJ,EACFA,EAAI,EAAIG,MACH,CAAA,GAAIH,IAAME,EACf,MAAOxH,GAAI6H,IAAsBzC,EAAAA,GAAdwC,GAAK,EAAI,EAE5B5H,IAAQS,KAAKwF,IAAI,EAAGmB,GACpBE,GAAQG,EAEV,OAAQG,GAAK,EAAI,GAAK5H,EAAIS,KAAKwF,IAAI,EAAGqB,EAAIF,IAG5C3I,QAAQqJ,MAAQ,SAAUb,EAAQxD,EAAOyD,EAAQC,EAAMC,EAAMC,GAC3D,GAAIC,GAAGtH,EAAG+H,EACNR,EAAgB,EAATF,EAAaD,EAAO,EAC3BI,GAAQ,GAAKD,GAAQ,EACrBE,EAAQD,GAAQ,EAChBQ,EAAe,KAATZ,EAAc3G,KAAKwF,IAAI,GAAI,IAAMxF,KAAKwF,IAAI,GAAI,IAAM,EAC1DjC,EAAImD,EAAO,EAAKE,EAAS,EACzBM,EAAIR,EAAO,GAAK,EAChBS,EAAInE,EAAQ,GAAgB,IAAVA,GAAe,EAAIA,EAAQ,EAAK,EAAI,CAmC1D,KAjCAA,EAAQhD,KAAKwH,IAAIxE,GAEbyE,MAAMzE,IAAUA,IAAU2B,EAAAA,GAC5BpF,EAAIkI,MAAMzE,GAAS,EAAI,EACvB6D,EAAIE,IAEJF,EAAI7G,KAAK0H,MAAM1H,KAAK2H,IAAI3E,GAAShD,KAAK4H,KAClC5E,GAASsE,EAAItH,KAAKwF,IAAI,GAAIqB,IAAM,IAClCA,IACAS,GAAK,GAGLtE,GADE6D,EAAIG,GAAS,EACNO,EAAKD,EAELC,EAAKvH,KAAKwF,IAAI,EAAG,EAAIwB,GAE5BhE,EAAQsE,GAAK,IACfT,IACAS,GAAK,GAGHT,EAAIG,GAASD,GACfxH,EAAI,EACJsH,EAAIE,GACKF,EAAIG,GAAS,GACtBzH,GAAKyD,EAAQsE,EAAI,GAAKtH,KAAKwF,IAAI,EAAGmB,GAClCE,GAAQG,IAERzH,EAAIyD,EAAQhD,KAAKwF,IAAI,EAAGwB,EAAQ,GAAKhH,KAAKwF,IAAI,EAAGmB,GACjDE,EAAI,IAIDF,GAAQ,EAAGH,EAAOC,EAASlD,GAAS,IAAJhE,EAAUgE,GAAK2D,EAAG3H,GAAK,IAAKoH,GAAQ,GAI3E,IAFAE,EAAKA,GAAKF,EAAQpH,EAClBuH,GAAQH,EACDG,EAAO,EAAGN,EAAOC,EAASlD,GAAS,IAAJsD,EAAUtD,GAAK2D,EAAGL,GAAK,IAAKC,GAAQ,GAE1EN,EAAOC,EAASlD,EAAI2D,IAAU,IAAJC;;AChF5B,YAAM,IAQNU,SAAI,SAAYC,EAAuE9C,EAAApH,EAAAC,GAC/EC,KAAKwE,KAAO,UAEhBxE,KAASiK,mBAAqBD,EACzBA,EAAwBE,GAAKhD,EAC7B8C,EAAwBG,GAAKrK,EAC7BkK,EAAwBI,GAAKrK,EAE9BC,KAAKuE,WAAayF,EAAkBzF,WAER,MAAxByF,EAAkBjF,KACtB/E,KAAS+E,GAAKiF,EAAkBjF,qCAIxCsF,oBAAIvC,SAAYwC,IAAA,WAOZ,WAN2B1E,KAAnB5F,KAAK0E,YACT1E,KAAS0E,UAAY1E,KAAKiK,mBAAmBhD,UACpCjH,KAAKiK,mBAAyBE,GAC9BnK,KAAKiK,mBAAyBG,GAC9BpK,KAAKiK,mBAAyBC,IAAIpC,UAEpC9H,KAAK0E,WAGpB2F,mBAAQvC,SAAQyC,IAAA,SAACC,GACbxK,KAAS0E,UAAY8F,GAGrBT,QAAA5J,UAAAsK,OAAM,WAAG,GAAAC,GAAA1K,KACC2K,GACF7C,SAAU9H,KAAK8H,SAEvB,KAAA,GAAerC,KAAKzF,GACF,cAANyF,GAA2B,uBAANA,IACzBkF,EAAKlF,GAAMzF,EAAWyF,GAE1B,OAAOkF,kEAIf1K,OAAOC,QAAU6J;;ACnDjB,YAMA,SAASa,KAAIC,GACT7K,KAAK6K,IAAMC,YAAYC,QAAUD,YAAYC,OAAOF,GAAOA,EAAM,GAAIG,YAAWH,GAAO,GACvF7K,KAAKiE,IAAM,EACXjE,KAAKwE,KAAO,EACZxE,KAAKkE,OAASlE,KAAK6K,IAAI3G,OAoX3B,QAAS+G,qBAAoBC,EAAG7B,EAAG/I,GAC/B,GACI6K,GAAGtI,EADHgI,EAAMvK,EAAEuK,GAG6B,IAAzChI,EAAIgI,EAAIvK,EAAE2D,OAAQkH,GAAU,IAAJtI,IAAa,EAAQA,EAAI,IAAM,MAAOuI,OAAMF,EAAGC,EAAG9B,EACjC,IAAzCxG,EAAIgI,EAAIvK,EAAE2D,OAAQkH,IAAU,IAAJtI,IAAa,EAAQA,EAAI,IAAM,MAAOuI,OAAMF,EAAGC,EAAG9B,EACjC,IAAzCxG,EAAIgI,EAAIvK,EAAE2D,OAAQkH,IAAU,IAAJtI,IAAa,GAAQA,EAAI,IAAM,MAAOuI,OAAMF,EAAGC,EAAG9B,EACjC,IAAzCxG,EAAIgI,EAAIvK,EAAE2D,OAAQkH,IAAU,IAAJtI,IAAa,GAAQA,EAAI,IAAM,MAAOuI,OAAMF,EAAGC,EAAG9B,EACjC,IAAzCxG,EAAIgI,EAAIvK,EAAE2D,OAAQkH,IAAU,IAAJtI,IAAa,GAAQA,EAAI,IAAM,MAAOuI,OAAMF,EAAGC,EAAG9B,EACjC,IAAzCxG,EAAIgI,EAAIvK,EAAE2D,OAAQkH,IAAU,EAAJtI,IAAa,GAAQA,EAAI,IAAM,MAAOuI,OAAMF,EAAGC,EAAG9B,EAE1E,MAAM,IAAI3C,OAAM,0CAGpB,QAAS2E,eAAc5H,GACnB,MAAOA,GAAIe,OAASoG,IAAIU,MACpB7H,EAAIO,aAAeP,EAAIQ,IAAMR,EAAIQ,IAAM,EAG/C,QAASmH,OAAMG,EAAKC,EAAMC,GACtB,MAAIA,GACc,WAAPD,GAAsBD,IAAQ,GAGlB,YAAdC,IAAS,IAAqBD,IAAQ,GAGnD,QAASG,gBAAeC,EAAKlI,GACzB,GAAI8H,GAAKC,CAiBT,IAfIG,GAAO,GACPJ,EAAQI,EAAM,WAAe,EAC7BH,EAAQG,EAAM,WAAe,IAE7BJ,KAAUI,EAAM,YAChBH,KAAUG,EAAM,YAEN,WAANJ,EACAA,EAAOA,EAAM,EAAK,GAElBA,EAAM,EACNC,EAAQA,EAAO,EAAK,IAIxBG,GAAO,qBAAuBA,GAAO,oBACrC,KAAM,IAAIjF,OAAM,yCAGpBjD,GAAImI,QAAQ,IAEZC,kBAAkBN,EAAKC,EAAM/H,GAC7BqI,mBAAmBN,EAAM/H,GAG7B,QAASoI,mBAAkBN,EAAKC,EAAM/H,GAClCA,EAAIoH,IAAIpH,EAAIQ,OAAe,IAANsH,EAAa,IAAMA,KAAS,EACjD9H,EAAIoH,IAAIpH,EAAIQ,OAAe,IAANsH,EAAa,IAAMA,KAAS,EACjD9H,EAAIoH,IAAIpH,EAAIQ,OAAe,IAANsH,EAAa,IAAMA,KAAS,EACjD9H,EAAIoH,IAAIpH,EAAIQ,OAAe,IAANsH,EAAa,IAAMA,KAAS,EACjD9H,EAAIoH,IAAIpH,EAAIQ,KAAe,IAANsH,EAGzB,QAASO,oBAAmBN,EAAM/H,GAC9B,GAAIsI,IAAc,EAAPP,IAAgB,CAE3B/H,GAAIoH,IAAIpH,EAAIQ,QAAU8H,IAAgBP,KAAU,GAAK,IAAO,GAASA,IACrE/H,EAAIoH,IAAIpH,EAAIQ,OAAiB,IAAPuH,IAAgBA,KAAU,GAAK,IAAO,GAASA,IACrE/H,EAAIoH,IAAIpH,EAAIQ,OAAiB,IAAPuH,IAAgBA,KAAU,GAAK,IAAO,GAASA,IACrE/H,EAAIoH,IAAIpH,EAAIQ,OAAiB,IAAPuH,IAAgBA,KAAU,GAAK,IAAO,GAASA,IACrE/H,EAAIoH,IAAIpH,EAAIQ,OAAiB,IAAPuH,IAAgBA,KAAU,GAAK,IAAO,GAASA,IACrE/H,EAAIoH,IAAIpH,EAAIQ,OAAiB,IAAPuH,OAG1B,QAASQ,wBAAuBC,EAAU5G,EAAK5B,GAC3C,GAAIyI,GACA7G,GAAO,MAAS,EAChBA,GAAO,QAAW,EAClBA,GAAO,UAAY,EAAInD,KAAKiK,KAAKjK,KAAK2H,IAAIxE,IAAmB,EAAXnD,KAAK4H,KAG3DrG,GAAImI,QAAQM,EACZ,KAAK,GAAIzG,GAAIhC,EAAIQ,IAAM,EAAGwB,GAAKwG,EAAUxG,IAAKhC,EAAIoH,IAAIpF,EAAIyG,GAAYzI,EAAIoH,IAAIpF,GAGlF,QAAS2G,mBAAkBC,EAAK5I,GAAS,IAAK,GAAIgC,GAAI,EAAGA,EAAI4G,EAAInI,OAAQuB,IAAKhC,EAAI6I,YAAYD,EAAI5G,IAClG,QAAS8G,oBAAmBF,EAAK5I,GAAQ,IAAK,GAAIgC,GAAI,EAAGA,EAAI4G,EAAInI,OAAQuB,IAAKhC,EAAI+I,aAAaH,EAAI5G,IACnG,QAASgH,kBAAiBJ,EAAK5I,GAAU,IAAK,GAAIgC,GAAI,EAAGA,EAAI4G,EAAInI,OAAQuB,IAAKhC,EAAIiJ,WAAWL,EAAI5G,IACjG,QAASkH,mBAAkBN,EAAK5I,GAAS,IAAK,GAAIgC,GAAI,EAAGA,EAAI4G,EAAInI,OAAQuB,IAAKhC,EAAImJ,YAAYP,EAAI5G,IAClG,QAASoH,oBAAmBR,EAAK5I,GAAQ,IAAK,GAAIgC,GAAI,EAAGA,EAAI4G,EAAInI,OAAQuB,IAAKhC,EAAIqJ,aAAaT,EAAI5G,IACnG,QAASsH,oBAAmBV,EAAK5I,GAAQ,IAAK,GAAIgC,GAAI,EAAGA,EAAI4G,EAAInI,OAAQuB,IAAKhC,EAAIuJ,aAAaX,EAAI5G,IACnG,QAASwH,qBAAoBZ,EAAK5I,GAAO,IAAK,GAAIgC,GAAI,EAAGA,EAAI4G,EAAInI,OAAQuB,IAAKhC,EAAIyJ,cAAcb,EAAI5G,IACpG,QAAS0H,oBAAmBd,EAAK5I,GAAQ,IAAK,GAAIgC,GAAI,EAAGA,EAAI4G,EAAInI,OAAQuB,IAAKhC,EAAI2J,aAAaf,EAAI5G,IACnG,QAAS4H,qBAAoBhB,EAAK5I,GAAO,IAAK,GAAIgC,GAAI,EAAGA,EAAI4G,EAAInI,OAAQuB,IAAKhC,EAAI6J,cAAcjB,EAAI5G,IAIpG,QAAS8H,YAAW1C,EAAK5G,GACrB,OAAS4G,EAAI5G,GACR4G,EAAI5G,EAAM,IAAM,EAChB4G,EAAI5G,EAAM,IAAM,IACD,SAAf4G,EAAI5G,EAAM,GAGnB,QAASuJ,YAAW3C,EAAKc,EAAK1H,GAC1B4G,EAAI5G,GAAO0H,EACXd,EAAI5G,EAAM,GAAM0H,IAAQ,EACxBd,EAAI5G,EAAM,GAAM0H,IAAQ,GACxBd,EAAI5G,EAAM,GAAM0H,IAAQ,GAG5B,QAAS8B,WAAU5C,EAAK5G,GACpB,OAAS4G,EAAI5G,GACR4G,EAAI5G,EAAM,IAAM,EAChB4G,EAAI5G,EAAM,IAAM,KAChB4G,EAAI5G,EAAM,IAAM,IAGzB,QAASyJ,UAAS7C,EAAK5G,EAAKP,GAIxB,IAHA,GAAIiK,GAAM,GACNlI,EAAIxB,EAEDwB,EAAI/B,GAAK,CACZ,GAAIkK,GAAK/C,EAAIpF,GACT+D,EAAI,KACJqE,EACAD,EAAK,IAAO,EACZA,EAAK,IAAO,EACZA,EAAK,IAAO,EAAI,CAEpB,IAAInI,EAAIoI,EAAmBnK,EAAK,KAEhC,IAAIoK,GAAIC,EAAIC,CAEa,KAArBH,EACID,EAAK,MACLpE,EAAIoE,GAEoB,IAArBC,EAEa,MAAV,KADVC,EAAKjD,EAAIpF,EAAI,OAET+D,GAAU,GAALoE,IAAc,EAAY,GAALE,IACjB,MACLtE,EAAI,MAGgB,IAArBqE,GACPC,EAAKjD,EAAIpF,EAAI,GACbsI,EAAKlD,EAAIpF,EAAI,GACO,MAAV,IAALqI,IAAuC,MAAV,IAALC,MACzBvE,GAAU,GAALoE,IAAa,IAAY,GAALE,IAAc,EAAY,GAALC,IACrC,MAAUvE,GAAK,OAAUA,GAAK,SACnCA,EAAI,OAGgB,IAArBqE,IACPC,EAAKjD,EAAIpF,EAAI,GACbsI,EAAKlD,EAAIpF,EAAI,GACbuI,EAAKnD,EAAIpF,EAAI,GACO,MAAV,IAALqI,IAAuC,MAAV,IAALC,IAAuC,MAAV,IAALC,MACjDxE,GAAU,GAALoE,IAAa,IAAa,GAALE,IAAc,IAAY,GAALC,IAAc,EAAY,GAALC,IAC3D,OAAUxE,GAAK,WACpBA,EAAI,OAKN,OAANA,GACAA,EAAI,MACJqE,EAAmB,GAEZrE,EAAI,QACXA,GAAK,MACLmE,GAAOM,OAAOC,aAAa1E,IAAM,GAAK,KAAQ,OAC9CA,EAAI,MAAa,KAAJA,GAGjBmE,GAAOM,OAAOC,aAAa1E,GAC3B/D,GAAKoI,EAGT,MAAOF,GAGX,QAASQ,WAAUtD,EAAK8C,EAAK1J,GACzB,IAAK,GAAWuF,GAAG4E,EAAV3I,EAAI,EAAYA,EAAIkI,EAAIzJ,OAAQuB,IAAK,CAG1C,IAFA+D,EAAImE,EAAIU,WAAW5I,IAEX,OAAU+D,EAAI,MAAQ,CAC1B,IAAI4E,EAWG,CACC5E,EAAI,OAAW/D,EAAI,IAAMkI,EAAIzJ,QAC7B2G,EAAI5G,KAAS,IACb4G,EAAI5G,KAAS,IACb4G,EAAI5G,KAAS,KAEbmK,EAAO5E,CAEX,UAlBA,GAAIA,EAAI,MAAQ,CACZqB,EAAI5G,KAAS,IACb4G,EAAI5G,KAAS,IACb4G,EAAI5G,KAAS,IACbmK,EAAO5E,CACP,UAEAA,EAAI4E,EAAO,OAAU,GAAK5E,EAAI,MAAS,MACvC4E,EAAO,SAYRA,KACPvD,EAAI5G,KAAS,IACb4G,EAAI5G,KAAS,IACb4G,EAAI5G,KAAS,IACbmK,EAAO,KAGP5E,GAAI,IACJqB,EAAI5G,KAASuF,GAETA,EAAI,KACJqB,EAAI5G,KAASuF,GAAK,EAAM,KAEpBA,EAAI,MACJqB,EAAI5G,KAASuF,GAAK,GAAM,KAExBqB,EAAI5G,KAASuF,GAAK,GAAO,IACzBqB,EAAI5G,KAASuF,GAAK,GAAM,GAAO,KAEnCqB,EAAI5G,KAASuF,GAAK,EAAM,GAAO,KAEnCqB,EAAI5G,KAAa,GAAJuF,EAAW,KAGhC,MAAOvF,GAtmBXhE,OAAOC,QAAU0K,GAEjB,IAAI0D,SAAUhL,QAAQ,UAStBsH,KAAI2D,OAAU,EACd3D,IAAI4D,QAAU,EACd5D,IAAIU,MAAU,EACdV,IAAI6D,QAAU,CAEd,IAAIC,eAAgB,WAChBC,eAAiB,EAAID,aAEzB9D,KAAIzK,WAEAyO,QAAS,WACL5O,KAAK6K,IAAM,MAKfjH,WAAY,SAASiL,EAAWhH,EAAQnE,GAGpC,IAFAA,EAAMA,GAAO1D,KAAKkE,OAEXlE,KAAKiE,IAAMP,GAAK,CACnB,GAAIiI,GAAM3L,KAAKgE,aACXF,EAAM6H,GAAO,EACbM,EAAWjM,KAAKiE,GAEpBjE,MAAKwE,KAAa,EAANmH,EACZkD,EAAU/K,EAAK+D,EAAQ7H,MAEnBA,KAAKiE,MAAQgI,GAAUjM,KAAK8O,KAAKnD,GAEzC,MAAO9D,IAGXkH,YAAa,SAASF,EAAWhH,GAC7B,MAAO7H,MAAK4D,WAAWiL,EAAWhH,EAAQ7H,KAAKgE,aAAehE,KAAKiE,MAGvE+K,YAAa,WACT,GAAIrD,GAAM4B,WAAWvN,KAAK6K,IAAK7K,KAAKiE,IAEpC,OADAjE,MAAKiE,KAAO,EACL0H,GAGXsD,aAAc,WACV,GAAItD,GAAM8B,UAAUzN,KAAK6K,IAAK7K,KAAKiE,IAEnC,OADAjE,MAAKiE,KAAO,EACL0H,GAKXuD,YAAa,WACT,GAAIvD,GAAM4B,WAAWvN,KAAK6K,IAAK7K,KAAKiE,KAAOsJ,WAAWvN,KAAK6K,IAAK7K,KAAKiE,IAAM,GAAKyK,aAEhF,OADA1O,MAAKiE,KAAO,EACL0H,GAGXwD,aAAc,WACV,GAAIxD,GAAM4B,WAAWvN,KAAK6K,IAAK7K,KAAKiE,KAAOwJ,UAAUzN,KAAK6K,IAAK7K,KAAKiE,IAAM,GAAKyK,aAE/E,OADA1O,MAAKiE,KAAO,EACL0H,GAGXtD,UAAW,WACP,GAAIsD,GAAM2C,QAAQ7F,KAAKzI,KAAK6K,IAAK7K,KAAKiE,KAAK,EAAM,GAAI,EAErD,OADAjE,MAAKiE,KAAO,EACL0H,GAGXrD,WAAY,WACR,GAAIqD,GAAM2C,QAAQ7F,KAAKzI,KAAK6K,IAAK7K,KAAKiE,KAAK,EAAM,GAAI,EAErD,OADAjE,MAAKiE,KAAO,EACL0H,GAGX3H,WAAY,SAASyH,GACjB,GACIE,GAAK9I,EADLgI,EAAM7K,KAAK6K,GAG+B,OAA9ChI,GAAIgI,EAAI7K,KAAKiE,OAAQ0H,EAAY,IAAJ9I,EAAqBA,EAAI,IAAa8I,GACnE9I,EAAIgI,EAAI7K,KAAKiE,OAAQ0H,IAAY,IAAJ9I,IAAa,EAAQA,EAAI,IAAa8I,GACnE9I,EAAIgI,EAAI7K,KAAKiE,OAAQ0H,IAAY,IAAJ9I,IAAa,GAAQA,EAAI,IAAa8I,GACnE9I,EAAIgI,EAAI7K,KAAKiE,OAAQ0H,IAAY,IAAJ9I,IAAa,GAAQA,EAAI,IAAa8I,GACnE9I,EAAIgI,EAAI7K,KAAKiE,KAAQ0H,IAAY,GAAJ9I,IAAa,GAEnCoI,oBAAoBU,EAAKF,EAAUzL,WAG9CuI,aAAc,WACV,MAAOvI,MAAKgE,YAAW,IAG3ByC,YAAa,WACT,GAAI2I,GAAMpP,KAAKgE,YACf,OAAOoL,GAAM,GAAM,GAAKA,EAAM,IAAM,EAAIA,EAAM,GAGlD5G,YAAa,WACT,MAAO6G,SAAQrP,KAAKgE,eAGxBmE,WAAY,WACR,GAAIzE,GAAM1D,KAAKgE,aAAehE,KAAKiE,IAC/B0J,EAAMD,SAAS1N,KAAK6K,IAAK7K,KAAKiE,IAAKP,EAEvC,OADA1D,MAAKiE,IAAMP,EACJiK,GAGX2B,UAAW,WACP,GAAI5L,GAAM1D,KAAKgE,aAAehE,KAAKiE,IAC/ByE,EAAS1I,KAAK6K,IAAI0E,SAASvP,KAAKiE,IAAKP,EAEzC,OADA1D,MAAKiE,IAAMP,EACJgF,GAKX8G,iBAAkB,SAASnD,EAAKZ,GAC5B,GAAI/H,GAAM2H,cAAcrL,KAExB,KADAqM,EAAMA,MACCrM,KAAKiE,IAAMP,GAAK2I,EAAIxG,KAAK7F,KAAKgE,WAAWyH,GAChD,OAAOY,IAEXoD,kBAAmB,SAASpD,GACxB,GAAI3I,GAAM2H,cAAcrL,KAExB,KADAqM,EAAMA,MACCrM,KAAKiE,IAAMP,GAAK2I,EAAIxG,KAAK7F,KAAKyG,cACrC,OAAO4F,IAEXqD,kBAAmB,SAASrD,GACxB,GAAI3I,GAAM2H,cAAcrL,KAExB,KADAqM,EAAMA,MACCrM,KAAKiE,IAAMP,GAAK2I,EAAIxG,KAAK7F,KAAKwI,cACrC,OAAO6D,IAEXsD,gBAAiB,SAAStD,GACtB,GAAI3I,GAAM2H,cAAcrL,KAExB,KADAqM,EAAMA,MACCrM,KAAKiE,IAAMP,GAAK2I,EAAIxG,KAAK7F,KAAKqI,YACrC,OAAOgE,IAEXuD,iBAAkB,SAASvD,GACvB,GAAI3I,GAAM2H,cAAcrL,KAExB,KADAqM,EAAMA,MACCrM,KAAKiE,IAAMP,GAAK2I,EAAIxG,KAAK7F,KAAKsI,aACrC,OAAO+D,IAEXwD,kBAAmB,SAASxD,GACxB,GAAI3I,GAAM2H,cAAcrL,KAExB,KADAqM,EAAMA,MACCrM,KAAKiE,IAAMP,GAAK2I,EAAIxG,KAAK7F,KAAKgP,cACrC,OAAO3C,IAEXyD,mBAAoB,SAASzD,GACzB,GAAI3I,GAAM2H,cAAcrL,KAExB,KADAqM,EAAMA,MACCrM,KAAKiE,IAAMP,GAAK2I,EAAIxG,KAAK7F,KAAKiP,eACrC,OAAO5C,IAEX0D,kBAAmB,SAAS1D,GACxB,GAAI3I,GAAM2H,cAAcrL,KAExB,KADAqM,EAAMA,MACCrM,KAAKiE,IAAMP,GAAK2I,EAAIxG,KAAK7F,KAAKkP,cACrC,OAAO7C,IAEX2D,mBAAoB,SAAS3D,GACzB,GAAI3I,GAAM2H,cAAcrL,KAExB,KADAqM,EAAMA,MACCrM,KAAKiE,IAAMP,GAAK2I,EAAIxG,KAAK7F,KAAKmP,eACrC,OAAO9C,IAGXyC,KAAM,SAASnD,GACX,GAAInH,GAAa,EAANmH,CACX,IAAInH,IAASoG,IAAI2D,OAAQ,KAAOvO,KAAK6K,IAAI7K,KAAKiE,OAAS,UAClD,IAAIO,IAASoG,IAAIU,MAAOtL,KAAKiE,IAAMjE,KAAKgE,aAAehE,KAAKiE,QAC5D,IAAIO,IAASoG,IAAI6D,QAASzO,KAAKiE,KAAO,MACtC,CAAA,GAAIO,IAASoG,IAAI4D,QACjB,KAAM,IAAI9H,OAAM,uBAAyBlC,EADfxE,MAAKiE,KAAO,IAM/CgM,SAAU,SAASnM,EAAKU,GACpBxE,KAAKsM,YAAaxI,GAAO,EAAKU,IAGlCoH,QAAS,SAASsE,GAGd,IAFA,GAAIhM,GAASlE,KAAKkE,QAAU,GAErBA,EAASlE,KAAKiE,IAAMiM,GAAKhM,GAAU,CAE1C,IAAIA,IAAWlE,KAAKkE,OAAQ,CACxB,GAAI2G,GAAM,GAAIG,YAAW9G,EACzB2G,GAAIN,IAAIvK,KAAK6K,KACb7K,KAAK6K,IAAMA,EACX7K,KAAKkE,OAASA,IAItBiM,OAAQ,WAGJ,MAFAnQ,MAAKkE,OAASlE,KAAKiE,IACnBjE,KAAKiE,IAAM,EACJjE,KAAK6K,IAAI0E,SAAS,EAAGvP,KAAKkE,SAGrC8I,aAAc,SAASrB,GACnB3L,KAAK4L,QAAQ,GACb4B,WAAWxN,KAAK6K,IAAKc,EAAK3L,KAAKiE,KAC/BjE,KAAKiE,KAAO,GAGhBiJ,cAAe,SAASvB,GACpB3L,KAAK4L,QAAQ,GACb4B,WAAWxN,KAAK6K,IAAKc,EAAK3L,KAAKiE,KAC/BjE,KAAKiE,KAAO,GAGhBmJ,aAAc,SAASzB,GACnB3L,KAAK4L,QAAQ,GACb4B,WAAWxN,KAAK6K,KAAY,EAAPc,EAAU3L,KAAKiE,KACpCuJ,WAAWxN,KAAK6K,IAAK3I,KAAK0H,MAAM+B,EAAMgD,gBAAiB3O,KAAKiE,IAAM,GAClEjE,KAAKiE,KAAO,GAGhBqJ,cAAe,SAAS3B,GACpB3L,KAAK4L,QAAQ,GACb4B,WAAWxN,KAAK6K,KAAY,EAAPc,EAAU3L,KAAKiE,KACpCuJ,WAAWxN,KAAK6K,IAAK3I,KAAK0H,MAAM+B,EAAMgD,gBAAiB3O,KAAKiE,IAAM,GAClEjE,KAAKiE,KAAO,GAGhBqI,YAAa,SAASX,GAGlB,IAFAA,GAAOA,GAAO,GAEJ,WAAaA,EAAM,EAEzB,WADAD,gBAAeC,EAAK3L,KAIxBA,MAAK4L,QAAQ,GAEb5L,KAAK6K,IAAI7K,KAAKiE,OAAyB,IAAN0H,GAAeA,EAAM,IAAO,IAAO,GAAQA,GAAO,MACnF3L,KAAK6K,IAAI7K,KAAKiE,OAAyB,KAAd0H,KAAS,IAAcA,EAAM,IAAO,IAAO,GAAQA,GAAO,MACnF3L,KAAK6K,IAAI7K,KAAKiE,OAAyB,KAAd0H,KAAS,IAAcA,EAAM,IAAO,IAAO,GAAQA,GAAO,MACnF3L,KAAK6K,IAAI7K,KAAKiE,OAAY0H,IAAQ,EAAK,QAG3Ca,aAAc,SAASb,GACnB3L,KAAKsM,YAAYX,EAAM,EAAW,GAANA,EAAU,EAAU,EAANA,IAG9CmB,aAAc,SAASnB,GACnB3L,KAAKsM,YAAY+C,QAAQ1D,KAG7ByE,YAAa,SAASzC,GAClBA,EAAMM,OAAON,GACb3N,KAAK4L,QAAqB,EAAb+B,EAAIzJ,QAEjBlE,KAAKiE,KAEL,IAAIgI,GAAWjM,KAAKiE,GAEpBjE,MAAKiE,IAAMkK,UAAUnO,KAAK6K,IAAK8C,EAAK3N,KAAKiE,IACzC,IAAIoB,GAAMrF,KAAKiE,IAAMgI,CAEjB5G,IAAO,KAAM2G,uBAAuBC,EAAU5G,EAAKrF,MAGvDA,KAAKiE,IAAMgI,EAAW,EACtBjM,KAAKsM,YAAYjH,GACjBrF,KAAKiE,KAAOoB,GAGhBqH,WAAY,SAASf,GACjB3L,KAAK4L,QAAQ,GACb0C,QAAQ/E,MAAMvJ,KAAK6K,IAAKc,EAAK3L,KAAKiE,KAAK,EAAM,GAAI,GACjDjE,KAAKiE,KAAO,GAGhB2I,YAAa,SAASjB,GAClB3L,KAAK4L,QAAQ,GACb0C,QAAQ/E,MAAMvJ,KAAK6K,IAAKc,EAAK3L,KAAKiE,KAAK,EAAM,GAAI,GACjDjE,KAAKiE,KAAO,GAGhBoM,WAAY,SAAS3H,GACjB,GAAIrD,GAAMqD,EAAOxE,MACjBlE,MAAKsM,YAAYjH,GACjBrF,KAAK4L,QAAQvG,EACb,KAAK,GAAII,GAAI,EAAGA,EAAIJ,EAAKI,IAAKzF,KAAK6K,IAAI7K,KAAKiE,OAASyE,EAAOjD,IAGhE6K,gBAAiB,SAASC,EAAIC,GAC1BxQ,KAAKiE,KAGL,IAAIgI,GAAWjM,KAAKiE,GACpBsM,GAAGC,EAAKxQ,KACR,IAAIqF,GAAMrF,KAAKiE,IAAMgI,CAEjB5G,IAAO,KAAM2G,uBAAuBC,EAAU5G,EAAKrF,MAGvDA,KAAKiE,IAAMgI,EAAW,EACtBjM,KAAKsM,YAAYjH,GACjBrF,KAAKiE,KAAOoB,GAGhBoL,aAAc,SAAS3M,EAAKyM,EAAIC,GAC5BxQ,KAAKiQ,SAASnM,EAAK8G,IAAIU,OACvBtL,KAAKsQ,gBAAgBC,EAAIC,IAG7BpE,kBAAqB,SAAStI,EAAKuI,GAAOrM,KAAKyQ,aAAa3M,EAAKsI,kBAAmBC,IACpFE,mBAAqB,SAASzI,EAAKuI,GAAOrM,KAAKyQ,aAAa3M,EAAKyI,mBAAoBF,IACrFQ,mBAAqB,SAAS/I,EAAKuI,GAAOrM,KAAKyQ,aAAa3M,EAAK+I,mBAAoBR,IACrFI,iBAAqB,SAAS3I,EAAKuI,GAAOrM,KAAKyQ,aAAa3M,EAAK2I,iBAAkBJ,IACnFM,kBAAqB,SAAS7I,EAAKuI,GAAOrM,KAAKyQ,aAAa3M,EAAK6I,kBAAmBN,IACpFU,mBAAqB,SAASjJ,EAAKuI,GAAOrM,KAAKyQ,aAAa3M,EAAKiJ,mBAAoBV,IACrFY,oBAAqB,SAASnJ,EAAKuI,GAAOrM,KAAKyQ,aAAa3M,EAAKmJ,oBAAqBZ,IACtFc,mBAAqB,SAASrJ,EAAKuI,GAAOrM,KAAKyQ,aAAa3M,EAAKqJ,mBAAoBd,IACrFgB,oBAAqB,SAASvJ,EAAKuI,GAAOrM,KAAKyQ,aAAa3M,EAAKuJ,oBAAqBhB,IAEtFqE,gBAAiB,SAAS5M,EAAK4E,GAC3B1I,KAAKiQ,SAASnM,EAAK8G,IAAIU,OACvBtL,KAAKqQ,WAAW3H,IAEpBiI,kBAAmB,SAAS7M,EAAK6H,GAC7B3L,KAAKiQ,SAASnM,EAAK8G,IAAI6D,SACvBzO,KAAKgN,aAAarB,IAEtBiF,mBAAoB,SAAS9M,EAAK6H,GAC9B3L,KAAKiQ,SAASnM,EAAK8G,IAAI6D,SACvBzO,KAAKkN,cAAcvB,IAEvBkF,kBAAmB,SAAS/M,EAAK6H,GAC7B3L,KAAKiQ,SAASnM,EAAK8G,IAAI4D,SACvBxO,KAAKoN,aAAazB,IAEtBmF,mBAAoB,SAAShN,EAAK6H,GAC9B3L,KAAKiQ,SAASnM,EAAK8G,IAAI4D,SACvBxO,KAAKsN,cAAc3B,IAEvBoF,iBAAkB,SAASjN,EAAK6H,GAC5B3L,KAAKiQ,SAASnM,EAAK8G,IAAI2D,QACvBvO,KAAKsM,YAAYX,IAErBqF,kBAAmB,SAASlN,EAAK6H,GAC7B3L,KAAKiQ,SAASnM,EAAK8G,IAAI2D,QACvBvO,KAAKwM,aAAab,IAEtBsF,iBAAkB,SAASnN,EAAK6J,GAC5B3N,KAAKiQ,SAASnM,EAAK8G,IAAIU,OACvBtL,KAAKoQ,YAAYzC,IAErBuD,gBAAiB,SAASpN,EAAK6H,GAC3B3L,KAAKiQ,SAASnM,EAAK8G,IAAI6D,SACvBzO,KAAK0M,WAAWf,IAEpBwF,iBAAkB,SAASrN,EAAK6H,GAC5B3L,KAAKiQ,SAASnM,EAAK8G,IAAI4D,SACvBxO,KAAK4M,YAAYjB,IAErByF,kBAAmB,SAAStN,EAAK6H,GAC7B3L,KAAK+Q,iBAAiBjN,EAAKuL,QAAQ1D;;ACxX3C,YAeA,SAAS0F,cAAaC,GAClB,MAAO,IAAIC,UAAS,IAAK,6CAA6CC,QAAQF,IAGlF,QAASE,SAAQF,GACb,IAAKA,EAAQ,MAAO,MACpBG,IAAMC,GAAKJ,EAAO,EAClB,OAAIA,GAAOpN,QAAU,EAAiB,QAAPwN,EAAe,QAAU,OAiBjD,KAfI,OAAPA,EAAcC,oBAAoBL,EAAO,GAAIA,EAAO,GAAI,OAAO,GACxD,OAAPI,EAAcC,oBAAoBL,EAAO,GAAIA,EAAO,GAAI,OAAO,GACxD,MAAPI,GACO,MAAPA,GACO,OAAPA,GACO,OAAPA,EAAcC,oBAAoBL,EAAO,GAAIA,EAAO,GAAII,GAAI,GACrD,OAAPA,EAAcE,eAAeN,EAAO,GAAIA,EAAO,IACxC,QAAPI,EAAeG,iBAAiBP,EAAOQ,MAAM,GAAI,MAC1C,QAAPJ,EAAeG,iBAAiBP,EAAOQ,MAAM,GAAI,MAC1C,SAAPJ,EAAgBK,gBAAgBF,iBAAiBP,EAAOQ,MAAM,GAAI,OAC3D,OAAPJ,EAAcM,YAAYV,EAAO,GAAIA,EAAOQ,MAAM,IAC3C,QAAPJ,EAAeK,gBAAgBC,YAAYV,EAAO,GAAIA,EAAOQ,MAAM,KAC5D,QAAPJ,EAAeO,aAAaX,EAAO,IAC5B,SAAPI,EAAgBK,gBAAgBE,aAAaX,EAAO,KACpD,QACU,IAGlB,QAASY,0BAAyBC,GAC9B,MAAoB,UAAbA,EAAuB,SACb,QAAbA,EAAqB,OACrB,KAAKC,KAAKC,UAAUF,GAAS,IAGrC,QAASR,qBAAoBQ,EAAUjN,EAAOwM,EAAIY,GAC9Cb,GAAMc,GAAOL,yBAAyBC,GAChCK,EAAqB,UAAbL,EAAuBhM,MAAMsM,QAAQvN,GAASkN,KAAKC,UAAUnN,EAC3E,QAAQoN,EAAY,UAAUC,EAAI,cAAcC,EAAK,KAAO,IAAMD,EAAOb,EAAKc,EAGlF,QAASZ,gBAAeO,EAAUjN,GAG9B,MAAU,wFAFGgN,yBAAyBC,GAI3B,KAHGjN,EAGO,IAGzB,QAAS2M,kBAAiBa,EAAahB,GACnC,MAAOgB,GAAYC,IAAInB,SAASoB,KAAKlB,GAGzC,QAASM,aAAYG,EAAU7N,GACV,UAAb6N,IAAsB7N,EAASA,EAAOqO,IAAI,SAACzN,GAC3C,MAAOiB,OAAMsM,QAAQvN,KAEzBuM,IAAMc,GAAOH,KAAKC,UAAU/N,EAAOuO,KAAKC,UAClCN,EAAQN,yBAAyBC,EAEvC,OAAI7N,GAAOJ,QAAU,IAAYqO,EAAO,YAAYC,EAAK,WAE/C,yJAIWA,EAAK,KAAKD,EAAI,OAAMjO,EAAOJ,OAAS,GAAC,IAG9D,QAAS+N,cAAaE,GAClB,MAAoB,QAAbA,EAAqB,YAAiBC,KAAKC,UAAUF,GAAS,QAGzE,QAASJ,iBAAgBgB,GACrB,MAAO,KAAKA,EAAU,IAI1B,QAASD,SAAQ1R,EAAGyB,GAChB,MAAOzB,GAAIyB,GAAK,EAAIzB,EAAIyB,EAAI,EAAI,EA1FpC5C,OAAOC,QAAUmR,YAEjBI,IAAMtL,QAAS,UAAW,QAAS,aAAc;;ACNjD,YAEAsL,IAAMuB,IAAK1P,QAAQ,uBACb2P,SAAW3P,QAAQ,OACnB4P,eAAiB5P,QAAQ,4CACzB6P,cAAgB7P,QAAQ,mBAE9BrD,QAAOC,SAEHkT,oBAAmB,SAACC,EAAUC,EAAQX,GAWlC,IAAKY,GAXkC7I,GAAA1K,KACjCwT,EAAcb,EAAIc,MAAMC,aAAaL,GAGrCM,EAAQH,EAAYI,mBAAmBjB,IAAI,SAAC5N,GAC9C,MAAOyO,GAAYK,YAAY9O,KAG7B8C,KAEAiM,KACGrO,EAAI,EAAGA,EAAIkO,EAAMzP,OAAQuB,IAAK,CACnCgM,GAAMsC,GAAOJ,EAAMlO,GACbuO,EAASD,EAAKE,OAAOC,UAAUjP,GAChC6O,GAAUE,KACXF,EAAUE,IAAU,EACpBhU,EAAKmU,UAAUtM,EAAQyL,EAAQS,IAIvC,MAAOlM,IAIXsM,UAAS,SAACtM,EAAQyL,EAAQS,GAEtB,GAAKA,EAAKK,YAAV,CAEKL,EAAKM,WACNN,EAAKM,SAAW,GAAIrB,IAAG3P,WAAW,GAAI4P,UAASc,EAAKK,cAAczQ,OAGtE8N,IAAM6C,GAAchB,EAASA,EAAOgB,YAAc,GAC5CvQ,EAAQgQ,EAAKM,SAASE,mBAAqBR,EAAKM,SAASC,EAE/D,IAAKvQ,EAKL,IAAKwP,GAHCjC,GAAS6B,cAAcG,GAAUA,EAAOhC,QACxCkD,GAAUtN,EAAG6M,EAAKE,OAAOQ,YAAa3U,EAAGiU,EAAKE,OAAOC,UAAUpU,EAAGC,EAAGgU,EAAKE,OAAOC,UAAUnU,GAExF0F,EAAI,EAAGA,EAAI1B,EAAMG,OAAQuB,IAAK,CACnCgM,GAAM3M,GAAUf,EAAMe,QAAQW,EAC9B,IAAI6L,EAAOxM,GAAU,CACjB2M,GAAMiD,GAAiB,GAAIxB,gBAAepO,EAAS0P,EAAMtN,EAAGsN,EAAM1U,EAAG0U,EAAMzU,EAC3E2U,GAAeX,KAAOS,EACtB3M,EAAOhC,KAAK6O","file":"bundle.js","sourcesContent":["(function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require==\"function\"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error(\"Cannot find module '\"+o+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require==\"function\"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s})","'use strict';\n\nmodule.exports = Point;\n\n/**\n * A standalone point geometry with useful accessor, comparison, and\n * modification methods.\n *\n * @class Point\n * @param {Number} x the x-coordinate. this could be longitude or screen\n * pixels, or any other sort of unit.\n * @param {Number} y the y-coordinate. this could be latitude or screen\n * pixels, or any other sort of unit.\n * @example\n * var point = new Point(-77, 38);\n */\nfunction Point(x, y) {\n    this.x = x;\n    this.y = y;\n}\n\nPoint.prototype = {\n\n    /**\n     * Clone this point, returning a new point that can be modified\n     * without affecting the old one.\n     * @return {Point} the clone\n     */\n    clone: function() { return new Point(this.x, this.y); },\n\n    /**\n     * Add this point's x & y coordinates to another point,\n     * yielding a new point.\n     * @param {Point} p the other point\n     * @return {Point} output point\n     */\n    add:     function(p) { return this.clone()._add(p); },\n\n    /**\n     * Subtract this point's x & y coordinates to from point,\n     * yielding a new point.\n     * @param {Point} p the other point\n     * @return {Point} output point\n     */\n    sub:     function(p) { return this.clone()._sub(p); },\n\n    /**\n     * Multiply this point's x & y coordinates by point,\n     * yielding a new point.\n     * @param {Point} p the other point\n     * @return {Point} output point\n     */\n    multByPoint:    function(p) { return this.clone()._multByPoint(p); },\n\n    /**\n     * Divide this point's x & y coordinates by point,\n     * yielding a new point.\n     * @param {Point} p the other point\n     * @return {Point} output point\n     */\n    divByPoint:     function(p) { return this.clone()._divByPoint(p); },\n\n    /**\n     * Multiply this point's x & y coordinates by a factor,\n     * yielding a new point.\n     * @param {Point} k factor\n     * @return {Point} output point\n     */\n    mult:    function(k) { return this.clone()._mult(k); },\n\n    /**\n     * Divide this point's x & y coordinates by a factor,\n     * yielding a new point.\n     * @param {Point} k factor\n     * @return {Point} output point\n     */\n    div:     function(k) { return this.clone()._div(k); },\n\n    /**\n     * Rotate this point around the 0, 0 origin by an angle a,\n     * given in radians\n     * @param {Number} a angle to rotate around, in radians\n     * @return {Point} output point\n     */\n    rotate:  function(a) { return this.clone()._rotate(a); },\n\n    /**\n     * Rotate this point around p point by an angle a,\n     * given in radians\n     * @param {Number} a angle to rotate around, in radians\n     * @param {Point} p Point to rotate around\n     * @return {Point} output point\n     */\n    rotateAround:  function(a,p) { return this.clone()._rotateAround(a,p); },\n\n    /**\n     * Multiply this point by a 4x1 transformation matrix\n     * @param {Array<Number>} m transformation matrix\n     * @return {Point} output point\n     */\n    matMult: function(m) { return this.clone()._matMult(m); },\n\n    /**\n     * Calculate this point but as a unit vector from 0, 0, meaning\n     * that the distance from the resulting point to the 0, 0\n     * coordinate will be equal to 1 and the angle from the resulting\n     * point to the 0, 0 coordinate will be the same as before.\n     * @return {Point} unit vector point\n     */\n    unit:    function() { return this.clone()._unit(); },\n\n    /**\n     * Compute a perpendicular point, where the new y coordinate\n     * is the old x coordinate and the new x coordinate is the old y\n     * coordinate multiplied by -1\n     * @return {Point} perpendicular point\n     */\n    perp:    function() { return this.clone()._perp(); },\n\n    /**\n     * Return a version of this point with the x & y coordinates\n     * rounded to integers.\n     * @return {Point} rounded point\n     */\n    round:   function() { return this.clone()._round(); },\n\n    /**\n     * Return the magitude of this point: this is the Euclidean\n     * distance from the 0, 0 coordinate to this point's x and y\n     * coordinates.\n     * @return {Number} magnitude\n     */\n    mag: function() {\n        return Math.sqrt(this.x * this.x + this.y * this.y);\n    },\n\n    /**\n     * Judge whether this point is equal to another point, returning\n     * true or false.\n     * @param {Point} other the other point\n     * @return {boolean} whether the points are equal\n     */\n    equals: function(other) {\n        return this.x === other.x &&\n               this.y === other.y;\n    },\n\n    /**\n     * Calculate the distance from this point to another point\n     * @param {Point} p the other point\n     * @return {Number} distance\n     */\n    dist: function(p) {\n        return Math.sqrt(this.distSqr(p));\n    },\n\n    /**\n     * Calculate the distance from this point to another point,\n     * without the square root step. Useful if you're comparing\n     * relative distances.\n     * @param {Point} p the other point\n     * @return {Number} distance\n     */\n    distSqr: function(p) {\n        var dx = p.x - this.x,\n            dy = p.y - this.y;\n        return dx * dx + dy * dy;\n    },\n\n    /**\n     * Get the angle from the 0, 0 coordinate to this point, in radians\n     * coordinates.\n     * @return {Number} angle\n     */\n    angle: function() {\n        return Math.atan2(this.y, this.x);\n    },\n\n    /**\n     * Get the angle from this point to another point, in radians\n     * @param {Point} b the other point\n     * @return {Number} angle\n     */\n    angleTo: function(b) {\n        return Math.atan2(this.y - b.y, this.x - b.x);\n    },\n\n    /**\n     * Get the angle between this point and another point, in radians\n     * @param {Point} b the other point\n     * @return {Number} angle\n     */\n    angleWith: function(b) {\n        return this.angleWithSep(b.x, b.y);\n    },\n\n    /*\n     * Find the angle of the two vectors, solving the formula for\n     * the cross product a x b = |a||b|sin(θ) for θ.\n     * @param {Number} x the x-coordinate\n     * @param {Number} y the y-coordinate\n     * @return {Number} the angle in radians\n     */\n    angleWithSep: function(x, y) {\n        return Math.atan2(\n            this.x * y - this.y * x,\n            this.x * x + this.y * y);\n    },\n\n    _matMult: function(m) {\n        var x = m[0] * this.x + m[1] * this.y,\n            y = m[2] * this.x + m[3] * this.y;\n        this.x = x;\n        this.y = y;\n        return this;\n    },\n\n    _add: function(p) {\n        this.x += p.x;\n        this.y += p.y;\n        return this;\n    },\n\n    _sub: function(p) {\n        this.x -= p.x;\n        this.y -= p.y;\n        return this;\n    },\n\n    _mult: function(k) {\n        this.x *= k;\n        this.y *= k;\n        return this;\n    },\n\n    _div: function(k) {\n        this.x /= k;\n        this.y /= k;\n        return this;\n    },\n\n    _multByPoint: function(p) {\n        this.x *= p.x;\n        this.y *= p.y;\n        return this;\n    },\n\n    _divByPoint: function(p) {\n        this.x /= p.x;\n        this.y /= p.y;\n        return this;\n    },\n\n    _unit: function() {\n        this._div(this.mag());\n        return this;\n    },\n\n    _perp: function() {\n        var y = this.y;\n        this.y = this.x;\n        this.x = -y;\n        return this;\n    },\n\n    _rotate: function(angle) {\n        var cos = Math.cos(angle),\n            sin = Math.sin(angle),\n            x = cos * this.x - sin * this.y,\n            y = sin * this.x + cos * this.y;\n        this.x = x;\n        this.y = y;\n        return this;\n    },\n\n    _rotateAround: function(angle, p) {\n        var cos = Math.cos(angle),\n            sin = Math.sin(angle),\n            x = p.x + cos * (this.x - p.x) - sin * (this.y - p.y),\n            y = p.y + sin * (this.x - p.x) + cos * (this.y - p.y);\n        this.x = x;\n        this.y = y;\n        return this;\n    },\n\n    _round: function() {\n        this.x = Math.round(this.x);\n        this.y = Math.round(this.y);\n        return this;\n    }\n};\n\n/**\n * Construct a point from an array if necessary, otherwise if the input\n * is already a Point, or an unknown type, return it unchanged\n * @param {Array<Number>|Point|*} a any kind of input value\n * @return {Point} constructed point, or passed-through value.\n * @example\n * // this\n * var point = Point.convert([0, 1]);\n * // is equivalent to\n * var point = new Point(0, 1);\n */\nPoint.convert = function (a) {\n    if (a instanceof Point) {\n        return a;\n    }\n    if (Array.isArray(a)) {\n        return new Point(a[0], a[1]);\n    }\n    return a;\n};\n","module.exports.VectorTile = require('./lib/vectortile.js');\nmodule.exports.VectorTileFeature = require('./lib/vectortilefeature.js');\nmodule.exports.VectorTileLayer = require('./lib/vectortilelayer.js');\n","'use strict';\n\nvar VectorTileLayer = require('./vectortilelayer');\n\nmodule.exports = VectorTile;\n\nfunction VectorTile(pbf, end) {\n    this.layers = pbf.readFields(readTile, {}, end);\n}\n\nfunction readTile(tag, layers, pbf) {\n    if (tag === 3) {\n        var layer = new VectorTileLayer(pbf, pbf.readVarint() + pbf.pos);\n        if (layer.length) layers[layer.name] = layer;\n    }\n}\n\n","'use strict';\n\nvar Point = require('@mapbox/point-geometry');\n\nmodule.exports = VectorTileFeature;\n\nfunction VectorTileFeature(pbf, end, extent, keys, values) {\n    // Public\n    this.properties = {};\n    this.extent = extent;\n    this.type = 0;\n\n    // Private\n    this._pbf = pbf;\n    this._geometry = -1;\n    this._keys = keys;\n    this._values = values;\n\n    pbf.readFields(readFeature, this, end);\n}\n\nfunction readFeature(tag, feature, pbf) {\n    if (tag == 1) feature.id = pbf.readVarint();\n    else if (tag == 2) readTag(pbf, feature);\n    else if (tag == 3) feature.type = pbf.readVarint();\n    else if (tag == 4) feature._geometry = pbf.pos;\n}\n\nfunction readTag(pbf, feature) {\n    var end = pbf.readVarint() + pbf.pos;\n\n    while (pbf.pos < end) {\n        var key = feature._keys[pbf.readVarint()],\n            value = feature._values[pbf.readVarint()];\n        feature.properties[key] = value;\n    }\n}\n\nVectorTileFeature.types = ['Unknown', 'Point', 'LineString', 'Polygon'];\n\nVectorTileFeature.prototype.loadGeometry = function() {\n    var pbf = this._pbf;\n    pbf.pos = this._geometry;\n\n    var end = pbf.readVarint() + pbf.pos,\n        cmd = 1,\n        length = 0,\n        x = 0,\n        y = 0,\n        lines = [],\n        line;\n\n    while (pbf.pos < end) {\n        if (!length) {\n            var cmdLen = pbf.readVarint();\n            cmd = cmdLen & 0x7;\n            length = cmdLen >> 3;\n        }\n\n        length--;\n\n        if (cmd === 1 || cmd === 2) {\n            x += pbf.readSVarint();\n            y += pbf.readSVarint();\n\n            if (cmd === 1) { // moveTo\n                if (line) lines.push(line);\n                line = [];\n            }\n\n            line.push(new Point(x, y));\n\n        } else if (cmd === 7) {\n\n            // Workaround for https://github.com/mapbox/mapnik-vector-tile/issues/90\n            if (line) {\n                line.push(line[0].clone()); // closePolygon\n            }\n\n        } else {\n            throw new Error('unknown command ' + cmd);\n        }\n    }\n\n    if (line) lines.push(line);\n\n    return lines;\n};\n\nVectorTileFeature.prototype.bbox = function() {\n    var pbf = this._pbf;\n    pbf.pos = this._geometry;\n\n    var end = pbf.readVarint() + pbf.pos,\n        cmd = 1,\n        length = 0,\n        x = 0,\n        y = 0,\n        x1 = Infinity,\n        x2 = -Infinity,\n        y1 = Infinity,\n        y2 = -Infinity;\n\n    while (pbf.pos < end) {\n        if (!length) {\n            var cmdLen = pbf.readVarint();\n            cmd = cmdLen & 0x7;\n            length = cmdLen >> 3;\n        }\n\n        length--;\n\n        if (cmd === 1 || cmd === 2) {\n            x += pbf.readSVarint();\n            y += pbf.readSVarint();\n            if (x < x1) x1 = x;\n            if (x > x2) x2 = x;\n            if (y < y1) y1 = y;\n            if (y > y2) y2 = y;\n\n        } else if (cmd !== 7) {\n            throw new Error('unknown command ' + cmd);\n        }\n    }\n\n    return [x1, y1, x2, y2];\n};\n\nVectorTileFeature.prototype.toGeoJSON = function(x, y, z) {\n    var size = this.extent * Math.pow(2, z),\n        x0 = this.extent * x,\n        y0 = this.extent * y,\n        coords = this.loadGeometry(),\n        type = VectorTileFeature.types[this.type],\n        i, j;\n\n    function project(line) {\n        for (var j = 0; j < line.length; j++) {\n            var p = line[j], y2 = 180 - (p.y + y0) * 360 / size;\n            line[j] = [\n                (p.x + x0) * 360 / size - 180,\n                360 / Math.PI * Math.atan(Math.exp(y2 * Math.PI / 180)) - 90\n            ];\n        }\n    }\n\n    switch (this.type) {\n    case 1:\n        var points = [];\n        for (i = 0; i < coords.length; i++) {\n            points[i] = coords[i][0];\n        }\n        coords = points;\n        project(coords);\n        break;\n\n    case 2:\n        for (i = 0; i < coords.length; i++) {\n            project(coords[i]);\n        }\n        break;\n\n    case 3:\n        coords = classifyRings(coords);\n        for (i = 0; i < coords.length; i++) {\n            for (j = 0; j < coords[i].length; j++) {\n                project(coords[i][j]);\n            }\n        }\n        break;\n    }\n\n    if (coords.length === 1) {\n        coords = coords[0];\n    } else {\n        type = 'Multi' + type;\n    }\n\n    var result = {\n        type: \"Feature\",\n        geometry: {\n            type: type,\n            coordinates: coords\n        },\n        properties: this.properties\n    };\n\n    if ('id' in this) {\n        result.id = this.id;\n    }\n\n    return result;\n};\n\n// classifies an array of rings into polygons with outer rings and holes\n\nfunction classifyRings(rings) {\n    var len = rings.length;\n\n    if (len <= 1) return [rings];\n\n    var polygons = [],\n        polygon,\n        ccw;\n\n    for (var i = 0; i < len; i++) {\n        var area = signedArea(rings[i]);\n        if (area === 0) continue;\n\n        if (ccw === undefined) ccw = area < 0;\n\n        if (ccw === area < 0) {\n            if (polygon) polygons.push(polygon);\n            polygon = [rings[i]];\n\n        } else {\n            polygon.push(rings[i]);\n        }\n    }\n    if (polygon) polygons.push(polygon);\n\n    return polygons;\n}\n\nfunction signedArea(ring) {\n    var sum = 0;\n    for (var i = 0, len = ring.length, j = len - 1, p1, p2; i < len; j = i++) {\n        p1 = ring[i];\n        p2 = ring[j];\n        sum += (p2.x - p1.x) * (p1.y + p2.y);\n    }\n    return sum;\n}\n","'use strict';\n\nvar VectorTileFeature = require('./vectortilefeature.js');\n\nmodule.exports = VectorTileLayer;\n\nfunction VectorTileLayer(pbf, end) {\n    // Public\n    this.version = 1;\n    this.name = null;\n    this.extent = 4096;\n    this.length = 0;\n\n    // Private\n    this._pbf = pbf;\n    this._keys = [];\n    this._values = [];\n    this._features = [];\n\n    pbf.readFields(readLayer, this, end);\n\n    this.length = this._features.length;\n}\n\nfunction readLayer(tag, layer, pbf) {\n    if (tag === 15) layer.version = pbf.readVarint();\n    else if (tag === 1) layer.name = pbf.readString();\n    else if (tag === 5) layer.extent = pbf.readVarint();\n    else if (tag === 2) layer._features.push(pbf.pos);\n    else if (tag === 3) layer._keys.push(pbf.readString());\n    else if (tag === 4) layer._values.push(readValueMessage(pbf));\n}\n\nfunction readValueMessage(pbf) {\n    var value = null,\n        end = pbf.readVarint() + pbf.pos;\n\n    while (pbf.pos < end) {\n        var tag = pbf.readVarint() >> 3;\n\n        value = tag === 1 ? pbf.readString() :\n            tag === 2 ? pbf.readFloat() :\n            tag === 3 ? pbf.readDouble() :\n            tag === 4 ? pbf.readVarint64() :\n            tag === 5 ? pbf.readVarint() :\n            tag === 6 ? pbf.readSVarint() :\n            tag === 7 ? pbf.readBoolean() : null;\n    }\n\n    return value;\n}\n\n// return feature `i` from this layer as a `VectorTileFeature`\nVectorTileLayer.prototype.feature = function(i) {\n    if (i < 0 || i >= this._features.length) throw new Error('feature index out of bounds');\n\n    this._pbf.pos = this._features[i];\n\n    var end = this._pbf.readVarint() + this._pbf.pos;\n    return new VectorTileFeature(this._pbf, end, this.extent, this._keys, this._values);\n};\n","exports.read = function (buffer, offset, isLE, mLen, nBytes) {\n  var e, m\n  var eLen = nBytes * 8 - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var nBits = -7\n  var i = isLE ? (nBytes - 1) : 0\n  var d = isLE ? -1 : 1\n  var s = buffer[offset + i]\n\n  i += d\n\n  e = s & ((1 << (-nBits)) - 1)\n  s >>= (-nBits)\n  nBits += eLen\n  for (; nBits > 0; e = e * 256 + buffer[offset + i], i += d, nBits -= 8) {}\n\n  m = e & ((1 << (-nBits)) - 1)\n  e >>= (-nBits)\n  nBits += mLen\n  for (; nBits > 0; m = m * 256 + buffer[offset + i], i += d, nBits -= 8) {}\n\n  if (e === 0) {\n    e = 1 - eBias\n  } else if (e === eMax) {\n    return m ? NaN : ((s ? -1 : 1) * Infinity)\n  } else {\n    m = m + Math.pow(2, mLen)\n    e = e - eBias\n  }\n  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)\n}\n\nexports.write = function (buffer, value, offset, isLE, mLen, nBytes) {\n  var e, m, c\n  var eLen = nBytes * 8 - mLen - 1\n  var eMax = (1 << eLen) - 1\n  var eBias = eMax >> 1\n  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)\n  var i = isLE ? 0 : (nBytes - 1)\n  var d = isLE ? 1 : -1\n  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0\n\n  value = Math.abs(value)\n\n  if (isNaN(value) || value === Infinity) {\n    m = isNaN(value) ? 1 : 0\n    e = eMax\n  } else {\n    e = Math.floor(Math.log(value) / Math.LN2)\n    if (value * (c = Math.pow(2, -e)) < 1) {\n      e--\n      c *= 2\n    }\n    if (e + eBias >= 1) {\n      value += rt / c\n    } else {\n      value += rt * Math.pow(2, 1 - eBias)\n    }\n    if (value * c >= 2) {\n      e++\n      c /= 2\n    }\n\n    if (e + eBias >= eMax) {\n      m = 0\n      e = eMax\n    } else if (e + eBias >= 1) {\n      m = (value * c - 1) * Math.pow(2, mLen)\n      e = e + eBias\n    } else {\n      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)\n      e = 0\n    }\n  }\n\n  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}\n\n  e = (e << mLen) | m\n  eLen += mLen\n  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}\n\n  buffer[offset + i - d] |= s * 128\n}\n","//      \n\nclass Feature {\n                    \n                                \n                   \n                               \n\n                                          \n\n    constructor(vectorTileFeature                   , z        , x        , y        ) {\n        this.type = 'Feature';\n\n        this._vectorTileFeature = vectorTileFeature;\n        (vectorTileFeature     )._z = z;\n        (vectorTileFeature     )._x = x;\n        (vectorTileFeature     )._y = y;\n\n        this.properties = vectorTileFeature.properties;\n\n        if (vectorTileFeature.id != null) {\n            this.id = vectorTileFeature.id;\n        }\n    }\n\n    get geometry()                   {\n        if (this._geometry === undefined) {\n            this._geometry = this._vectorTileFeature.toGeoJSON(\n                (this._vectorTileFeature     )._x,\n                (this._vectorTileFeature     )._y,\n                (this._vectorTileFeature     )._z).geometry;\n        }\n        return this._geometry;\n    }\n\n    set geometry(g                  ) {\n        this._geometry = g;\n    }\n\n    toJSON() {\n        const json = {\n            geometry: this.geometry\n        };\n        for (const i in this) {\n            if (i === '_geometry' || i === '_vectorTileFeature') continue;\n            json[i] = (this     )[i];\n        }\n        return json;\n    }\n}\n\nmodule.exports = Feature;\n","'use strict';\n\nmodule.exports = Pbf;\n\nvar ieee754 = require('ieee754');\n\nfunction Pbf(buf) {\n    this.buf = ArrayBuffer.isView && ArrayBuffer.isView(buf) ? buf : new Uint8Array(buf || 0);\n    this.pos = 0;\n    this.type = 0;\n    this.length = this.buf.length;\n}\n\nPbf.Varint  = 0; // varint: int32, int64, uint32, uint64, sint32, sint64, bool, enum\nPbf.Fixed64 = 1; // 64-bit: double, fixed64, sfixed64\nPbf.Bytes   = 2; // length-delimited: string, bytes, embedded messages, packed repeated fields\nPbf.Fixed32 = 5; // 32-bit: float, fixed32, sfixed32\n\nvar SHIFT_LEFT_32 = (1 << 16) * (1 << 16),\n    SHIFT_RIGHT_32 = 1 / SHIFT_LEFT_32;\n\nPbf.prototype = {\n\n    destroy: function() {\n        this.buf = null;\n    },\n\n    // === READING =================================================================\n\n    readFields: function(readField, result, end) {\n        end = end || this.length;\n\n        while (this.pos < end) {\n            var val = this.readVarint(),\n                tag = val >> 3,\n                startPos = this.pos;\n\n            this.type = val & 0x7;\n            readField(tag, result, this);\n\n            if (this.pos === startPos) this.skip(val);\n        }\n        return result;\n    },\n\n    readMessage: function(readField, result) {\n        return this.readFields(readField, result, this.readVarint() + this.pos);\n    },\n\n    readFixed32: function() {\n        var val = readUInt32(this.buf, this.pos);\n        this.pos += 4;\n        return val;\n    },\n\n    readSFixed32: function() {\n        var val = readInt32(this.buf, this.pos);\n        this.pos += 4;\n        return val;\n    },\n\n    // 64-bit int handling is based on github.com/dpw/node-buffer-more-ints (MIT-licensed)\n\n    readFixed64: function() {\n        var val = readUInt32(this.buf, this.pos) + readUInt32(this.buf, this.pos + 4) * SHIFT_LEFT_32;\n        this.pos += 8;\n        return val;\n    },\n\n    readSFixed64: function() {\n        var val = readUInt32(this.buf, this.pos) + readInt32(this.buf, this.pos + 4) * SHIFT_LEFT_32;\n        this.pos += 8;\n        return val;\n    },\n\n    readFloat: function() {\n        var val = ieee754.read(this.buf, this.pos, true, 23, 4);\n        this.pos += 4;\n        return val;\n    },\n\n    readDouble: function() {\n        var val = ieee754.read(this.buf, this.pos, true, 52, 8);\n        this.pos += 8;\n        return val;\n    },\n\n    readVarint: function(isSigned) {\n        var buf = this.buf,\n            val, b;\n\n        b = buf[this.pos++]; val  =  b & 0x7f;        if (b < 0x80) return val;\n        b = buf[this.pos++]; val |= (b & 0x7f) << 7;  if (b < 0x80) return val;\n        b = buf[this.pos++]; val |= (b & 0x7f) << 14; if (b < 0x80) return val;\n        b = buf[this.pos++]; val |= (b & 0x7f) << 21; if (b < 0x80) return val;\n        b = buf[this.pos];   val |= (b & 0x0f) << 28;\n\n        return readVarintRemainder(val, isSigned, this);\n    },\n\n    readVarint64: function() { // for compatibility with v2.0.1\n        return this.readVarint(true);\n    },\n\n    readSVarint: function() {\n        var num = this.readVarint();\n        return num % 2 === 1 ? (num + 1) / -2 : num / 2; // zigzag encoding\n    },\n\n    readBoolean: function() {\n        return Boolean(this.readVarint());\n    },\n\n    readString: function() {\n        var end = this.readVarint() + this.pos,\n            str = readUtf8(this.buf, this.pos, end);\n        this.pos = end;\n        return str;\n    },\n\n    readBytes: function() {\n        var end = this.readVarint() + this.pos,\n            buffer = this.buf.subarray(this.pos, end);\n        this.pos = end;\n        return buffer;\n    },\n\n    // verbose for performance reasons; doesn't affect gzipped size\n\n    readPackedVarint: function(arr, isSigned) {\n        var end = readPackedEnd(this);\n        arr = arr || [];\n        while (this.pos < end) arr.push(this.readVarint(isSigned));\n        return arr;\n    },\n    readPackedSVarint: function(arr) {\n        var end = readPackedEnd(this);\n        arr = arr || [];\n        while (this.pos < end) arr.push(this.readSVarint());\n        return arr;\n    },\n    readPackedBoolean: function(arr) {\n        var end = readPackedEnd(this);\n        arr = arr || [];\n        while (this.pos < end) arr.push(this.readBoolean());\n        return arr;\n    },\n    readPackedFloat: function(arr) {\n        var end = readPackedEnd(this);\n        arr = arr || [];\n        while (this.pos < end) arr.push(this.readFloat());\n        return arr;\n    },\n    readPackedDouble: function(arr) {\n        var end = readPackedEnd(this);\n        arr = arr || [];\n        while (this.pos < end) arr.push(this.readDouble());\n        return arr;\n    },\n    readPackedFixed32: function(arr) {\n        var end = readPackedEnd(this);\n        arr = arr || [];\n        while (this.pos < end) arr.push(this.readFixed32());\n        return arr;\n    },\n    readPackedSFixed32: function(arr) {\n        var end = readPackedEnd(this);\n        arr = arr || [];\n        while (this.pos < end) arr.push(this.readSFixed32());\n        return arr;\n    },\n    readPackedFixed64: function(arr) {\n        var end = readPackedEnd(this);\n        arr = arr || [];\n        while (this.pos < end) arr.push(this.readFixed64());\n        return arr;\n    },\n    readPackedSFixed64: function(arr) {\n        var end = readPackedEnd(this);\n        arr = arr || [];\n        while (this.pos < end) arr.push(this.readSFixed64());\n        return arr;\n    },\n\n    skip: function(val) {\n        var type = val & 0x7;\n        if (type === Pbf.Varint) while (this.buf[this.pos++] > 0x7f) {}\n        else if (type === Pbf.Bytes) this.pos = this.readVarint() + this.pos;\n        else if (type === Pbf.Fixed32) this.pos += 4;\n        else if (type === Pbf.Fixed64) this.pos += 8;\n        else throw new Error('Unimplemented type: ' + type);\n    },\n\n    // === WRITING =================================================================\n\n    writeTag: function(tag, type) {\n        this.writeVarint((tag << 3) | type);\n    },\n\n    realloc: function(min) {\n        var length = this.length || 16;\n\n        while (length < this.pos + min) length *= 2;\n\n        if (length !== this.length) {\n            var buf = new Uint8Array(length);\n            buf.set(this.buf);\n            this.buf = buf;\n            this.length = length;\n        }\n    },\n\n    finish: function() {\n        this.length = this.pos;\n        this.pos = 0;\n        return this.buf.subarray(0, this.length);\n    },\n\n    writeFixed32: function(val) {\n        this.realloc(4);\n        writeInt32(this.buf, val, this.pos);\n        this.pos += 4;\n    },\n\n    writeSFixed32: function(val) {\n        this.realloc(4);\n        writeInt32(this.buf, val, this.pos);\n        this.pos += 4;\n    },\n\n    writeFixed64: function(val) {\n        this.realloc(8);\n        writeInt32(this.buf, val & -1, this.pos);\n        writeInt32(this.buf, Math.floor(val * SHIFT_RIGHT_32), this.pos + 4);\n        this.pos += 8;\n    },\n\n    writeSFixed64: function(val) {\n        this.realloc(8);\n        writeInt32(this.buf, val & -1, this.pos);\n        writeInt32(this.buf, Math.floor(val * SHIFT_RIGHT_32), this.pos + 4);\n        this.pos += 8;\n    },\n\n    writeVarint: function(val) {\n        val = +val || 0;\n\n        if (val > 0xfffffff || val < 0) {\n            writeBigVarint(val, this);\n            return;\n        }\n\n        this.realloc(4);\n\n        this.buf[this.pos++] =           val & 0x7f  | (val > 0x7f ? 0x80 : 0); if (val <= 0x7f) return;\n        this.buf[this.pos++] = ((val >>>= 7) & 0x7f) | (val > 0x7f ? 0x80 : 0); if (val <= 0x7f) return;\n        this.buf[this.pos++] = ((val >>>= 7) & 0x7f) | (val > 0x7f ? 0x80 : 0); if (val <= 0x7f) return;\n        this.buf[this.pos++] =   (val >>> 7) & 0x7f;\n    },\n\n    writeSVarint: function(val) {\n        this.writeVarint(val < 0 ? -val * 2 - 1 : val * 2);\n    },\n\n    writeBoolean: function(val) {\n        this.writeVarint(Boolean(val));\n    },\n\n    writeString: function(str) {\n        str = String(str);\n        this.realloc(str.length * 4);\n\n        this.pos++; // reserve 1 byte for short string length\n\n        var startPos = this.pos;\n        // write the string directly to the buffer and see how much was written\n        this.pos = writeUtf8(this.buf, str, this.pos);\n        var len = this.pos - startPos;\n\n        if (len >= 0x80) makeRoomForExtraLength(startPos, len, this);\n\n        // finally, write the message length in the reserved place and restore the position\n        this.pos = startPos - 1;\n        this.writeVarint(len);\n        this.pos += len;\n    },\n\n    writeFloat: function(val) {\n        this.realloc(4);\n        ieee754.write(this.buf, val, this.pos, true, 23, 4);\n        this.pos += 4;\n    },\n\n    writeDouble: function(val) {\n        this.realloc(8);\n        ieee754.write(this.buf, val, this.pos, true, 52, 8);\n        this.pos += 8;\n    },\n\n    writeBytes: function(buffer) {\n        var len = buffer.length;\n        this.writeVarint(len);\n        this.realloc(len);\n        for (var i = 0; i < len; i++) this.buf[this.pos++] = buffer[i];\n    },\n\n    writeRawMessage: function(fn, obj) {\n        this.pos++; // reserve 1 byte for short message length\n\n        // write the message directly to the buffer and see how much was written\n        var startPos = this.pos;\n        fn(obj, this);\n        var len = this.pos - startPos;\n\n        if (len >= 0x80) makeRoomForExtraLength(startPos, len, this);\n\n        // finally, write the message length in the reserved place and restore the position\n        this.pos = startPos - 1;\n        this.writeVarint(len);\n        this.pos += len;\n    },\n\n    writeMessage: function(tag, fn, obj) {\n        this.writeTag(tag, Pbf.Bytes);\n        this.writeRawMessage(fn, obj);\n    },\n\n    writePackedVarint:   function(tag, arr) { this.writeMessage(tag, writePackedVarint, arr);   },\n    writePackedSVarint:  function(tag, arr) { this.writeMessage(tag, writePackedSVarint, arr);  },\n    writePackedBoolean:  function(tag, arr) { this.writeMessage(tag, writePackedBoolean, arr);  },\n    writePackedFloat:    function(tag, arr) { this.writeMessage(tag, writePackedFloat, arr);    },\n    writePackedDouble:   function(tag, arr) { this.writeMessage(tag, writePackedDouble, arr);   },\n    writePackedFixed32:  function(tag, arr) { this.writeMessage(tag, writePackedFixed32, arr);  },\n    writePackedSFixed32: function(tag, arr) { this.writeMessage(tag, writePackedSFixed32, arr); },\n    writePackedFixed64:  function(tag, arr) { this.writeMessage(tag, writePackedFixed64, arr);  },\n    writePackedSFixed64: function(tag, arr) { this.writeMessage(tag, writePackedSFixed64, arr); },\n\n    writeBytesField: function(tag, buffer) {\n        this.writeTag(tag, Pbf.Bytes);\n        this.writeBytes(buffer);\n    },\n    writeFixed32Field: function(tag, val) {\n        this.writeTag(tag, Pbf.Fixed32);\n        this.writeFixed32(val);\n    },\n    writeSFixed32Field: function(tag, val) {\n        this.writeTag(tag, Pbf.Fixed32);\n        this.writeSFixed32(val);\n    },\n    writeFixed64Field: function(tag, val) {\n        this.writeTag(tag, Pbf.Fixed64);\n        this.writeFixed64(val);\n    },\n    writeSFixed64Field: function(tag, val) {\n        this.writeTag(tag, Pbf.Fixed64);\n        this.writeSFixed64(val);\n    },\n    writeVarintField: function(tag, val) {\n        this.writeTag(tag, Pbf.Varint);\n        this.writeVarint(val);\n    },\n    writeSVarintField: function(tag, val) {\n        this.writeTag(tag, Pbf.Varint);\n        this.writeSVarint(val);\n    },\n    writeStringField: function(tag, str) {\n        this.writeTag(tag, Pbf.Bytes);\n        this.writeString(str);\n    },\n    writeFloatField: function(tag, val) {\n        this.writeTag(tag, Pbf.Fixed32);\n        this.writeFloat(val);\n    },\n    writeDoubleField: function(tag, val) {\n        this.writeTag(tag, Pbf.Fixed64);\n        this.writeDouble(val);\n    },\n    writeBooleanField: function(tag, val) {\n        this.writeVarintField(tag, Boolean(val));\n    }\n};\n\nfunction readVarintRemainder(l, s, p) {\n    var buf = p.buf,\n        h, b;\n\n    b = buf[p.pos++]; h  = (b & 0x70) >> 4;  if (b < 0x80) return toNum(l, h, s);\n    b = buf[p.pos++]; h |= (b & 0x7f) << 3;  if (b < 0x80) return toNum(l, h, s);\n    b = buf[p.pos++]; h |= (b & 0x7f) << 10; if (b < 0x80) return toNum(l, h, s);\n    b = buf[p.pos++]; h |= (b & 0x7f) << 17; if (b < 0x80) return toNum(l, h, s);\n    b = buf[p.pos++]; h |= (b & 0x7f) << 24; if (b < 0x80) return toNum(l, h, s);\n    b = buf[p.pos++]; h |= (b & 0x01) << 31; if (b < 0x80) return toNum(l, h, s);\n\n    throw new Error('Expected varint not more than 10 bytes');\n}\n\nfunction readPackedEnd(pbf) {\n    return pbf.type === Pbf.Bytes ?\n        pbf.readVarint() + pbf.pos : pbf.pos + 1;\n}\n\nfunction toNum(low, high, isSigned) {\n    if (isSigned) {\n        return high * 0x100000000 + (low >>> 0);\n    }\n\n    return ((high >>> 0) * 0x100000000) + (low >>> 0);\n}\n\nfunction writeBigVarint(val, pbf) {\n    var low, high;\n\n    if (val >= 0) {\n        low  = (val % 0x100000000) | 0;\n        high = (val / 0x100000000) | 0;\n    } else {\n        low  = ~(-val % 0x100000000);\n        high = ~(-val / 0x100000000);\n\n        if (low ^ 0xffffffff) {\n            low = (low + 1) | 0;\n        } else {\n            low = 0;\n            high = (high + 1) | 0;\n        }\n    }\n\n    if (val >= 0x10000000000000000 || val < -0x10000000000000000) {\n        throw new Error('Given varint doesn\\'t fit into 10 bytes');\n    }\n\n    pbf.realloc(10);\n\n    writeBigVarintLow(low, high, pbf);\n    writeBigVarintHigh(high, pbf);\n}\n\nfunction writeBigVarintLow(low, high, pbf) {\n    pbf.buf[pbf.pos++] = low & 0x7f | 0x80; low >>>= 7;\n    pbf.buf[pbf.pos++] = low & 0x7f | 0x80; low >>>= 7;\n    pbf.buf[pbf.pos++] = low & 0x7f | 0x80; low >>>= 7;\n    pbf.buf[pbf.pos++] = low & 0x7f | 0x80; low >>>= 7;\n    pbf.buf[pbf.pos]   = low & 0x7f;\n}\n\nfunction writeBigVarintHigh(high, pbf) {\n    var lsb = (high & 0x07) << 4;\n\n    pbf.buf[pbf.pos++] |= lsb         | ((high >>>= 3) ? 0x80 : 0); if (!high) return;\n    pbf.buf[pbf.pos++]  = high & 0x7f | ((high >>>= 7) ? 0x80 : 0); if (!high) return;\n    pbf.buf[pbf.pos++]  = high & 0x7f | ((high >>>= 7) ? 0x80 : 0); if (!high) return;\n    pbf.buf[pbf.pos++]  = high & 0x7f | ((high >>>= 7) ? 0x80 : 0); if (!high) return;\n    pbf.buf[pbf.pos++]  = high & 0x7f | ((high >>>= 7) ? 0x80 : 0); if (!high) return;\n    pbf.buf[pbf.pos++]  = high & 0x7f;\n}\n\nfunction makeRoomForExtraLength(startPos, len, pbf) {\n    var extraLen =\n        len <= 0x3fff ? 1 :\n        len <= 0x1fffff ? 2 :\n        len <= 0xfffffff ? 3 : Math.ceil(Math.log(len) / (Math.LN2 * 7));\n\n    // if 1 byte isn't enough for encoding message length, shift the data to the right\n    pbf.realloc(extraLen);\n    for (var i = pbf.pos - 1; i >= startPos; i--) pbf.buf[i + extraLen] = pbf.buf[i];\n}\n\nfunction writePackedVarint(arr, pbf)   { for (var i = 0; i < arr.length; i++) pbf.writeVarint(arr[i]);   }\nfunction writePackedSVarint(arr, pbf)  { for (var i = 0; i < arr.length; i++) pbf.writeSVarint(arr[i]);  }\nfunction writePackedFloat(arr, pbf)    { for (var i = 0; i < arr.length; i++) pbf.writeFloat(arr[i]);    }\nfunction writePackedDouble(arr, pbf)   { for (var i = 0; i < arr.length; i++) pbf.writeDouble(arr[i]);   }\nfunction writePackedBoolean(arr, pbf)  { for (var i = 0; i < arr.length; i++) pbf.writeBoolean(arr[i]);  }\nfunction writePackedFixed32(arr, pbf)  { for (var i = 0; i < arr.length; i++) pbf.writeFixed32(arr[i]);  }\nfunction writePackedSFixed32(arr, pbf) { for (var i = 0; i < arr.length; i++) pbf.writeSFixed32(arr[i]); }\nfunction writePackedFixed64(arr, pbf)  { for (var i = 0; i < arr.length; i++) pbf.writeFixed64(arr[i]);  }\nfunction writePackedSFixed64(arr, pbf) { for (var i = 0; i < arr.length; i++) pbf.writeSFixed64(arr[i]); }\n\n// Buffer code below from https://github.com/feross/buffer, MIT-licensed\n\nfunction readUInt32(buf, pos) {\n    return ((buf[pos]) |\n        (buf[pos + 1] << 8) |\n        (buf[pos + 2] << 16)) +\n        (buf[pos + 3] * 0x1000000);\n}\n\nfunction writeInt32(buf, val, pos) {\n    buf[pos] = val;\n    buf[pos + 1] = (val >>> 8);\n    buf[pos + 2] = (val >>> 16);\n    buf[pos + 3] = (val >>> 24);\n}\n\nfunction readInt32(buf, pos) {\n    return ((buf[pos]) |\n        (buf[pos + 1] << 8) |\n        (buf[pos + 2] << 16)) +\n        (buf[pos + 3] << 24);\n}\n\nfunction readUtf8(buf, pos, end) {\n    var str = '';\n    var i = pos;\n\n    while (i < end) {\n        var b0 = buf[i];\n        var c = null; // codepoint\n        var bytesPerSequence =\n            b0 > 0xEF ? 4 :\n            b0 > 0xDF ? 3 :\n            b0 > 0xBF ? 2 : 1;\n\n        if (i + bytesPerSequence > end) break;\n\n        var b1, b2, b3;\n\n        if (bytesPerSequence === 1) {\n            if (b0 < 0x80) {\n                c = b0;\n            }\n        } else if (bytesPerSequence === 2) {\n            b1 = buf[i + 1];\n            if ((b1 & 0xC0) === 0x80) {\n                c = (b0 & 0x1F) << 0x6 | (b1 & 0x3F);\n                if (c <= 0x7F) {\n                    c = null;\n                }\n            }\n        } else if (bytesPerSequence === 3) {\n            b1 = buf[i + 1];\n            b2 = buf[i + 2];\n            if ((b1 & 0xC0) === 0x80 && (b2 & 0xC0) === 0x80) {\n                c = (b0 & 0xF) << 0xC | (b1 & 0x3F) << 0x6 | (b2 & 0x3F);\n                if (c <= 0x7FF || (c >= 0xD800 && c <= 0xDFFF)) {\n                    c = null;\n                }\n            }\n        } else if (bytesPerSequence === 4) {\n            b1 = buf[i + 1];\n            b2 = buf[i + 2];\n            b3 = buf[i + 3];\n            if ((b1 & 0xC0) === 0x80 && (b2 & 0xC0) === 0x80 && (b3 & 0xC0) === 0x80) {\n                c = (b0 & 0xF) << 0x12 | (b1 & 0x3F) << 0xC | (b2 & 0x3F) << 0x6 | (b3 & 0x3F);\n                if (c <= 0xFFFF || c >= 0x110000) {\n                    c = null;\n                }\n            }\n        }\n\n        if (c === null) {\n            c = 0xFFFD;\n            bytesPerSequence = 1;\n\n        } else if (c > 0xFFFF) {\n            c -= 0x10000;\n            str += String.fromCharCode(c >>> 10 & 0x3FF | 0xD800);\n            c = 0xDC00 | c & 0x3FF;\n        }\n\n        str += String.fromCharCode(c);\n        i += bytesPerSequence;\n    }\n\n    return str;\n}\n\nfunction writeUtf8(buf, str, pos) {\n    for (var i = 0, c, lead; i < str.length; i++) {\n        c = str.charCodeAt(i); // code point\n\n        if (c > 0xD7FF && c < 0xE000) {\n            if (lead) {\n                if (c < 0xDC00) {\n                    buf[pos++] = 0xEF;\n                    buf[pos++] = 0xBF;\n                    buf[pos++] = 0xBD;\n                    lead = c;\n                    continue;\n                } else {\n                    c = lead - 0xD800 << 10 | c - 0xDC00 | 0x10000;\n                    lead = null;\n                }\n            } else {\n                if (c > 0xDBFF || (i + 1 === str.length)) {\n                    buf[pos++] = 0xEF;\n                    buf[pos++] = 0xBF;\n                    buf[pos++] = 0xBD;\n                } else {\n                    lead = c;\n                }\n                continue;\n            }\n        } else if (lead) {\n            buf[pos++] = 0xEF;\n            buf[pos++] = 0xBF;\n            buf[pos++] = 0xBD;\n            lead = null;\n        }\n\n        if (c < 0x80) {\n            buf[pos++] = c;\n        } else {\n            if (c < 0x800) {\n                buf[pos++] = c >> 0x6 | 0xC0;\n            } else {\n                if (c < 0x10000) {\n                    buf[pos++] = c >> 0xC | 0xE0;\n                } else {\n                    buf[pos++] = c >> 0x12 | 0xF0;\n                    buf[pos++] = c >> 0xC & 0x3F | 0x80;\n                }\n                buf[pos++] = c >> 0x6 & 0x3F | 0x80;\n            }\n            buf[pos++] = c & 0x3F | 0x80;\n        }\n    }\n    return pos;\n}\n","//adapted from https://github.com/mapbox/mapbox-gl-js/blob/5886421ea9a5ae26797c950ec698be473fe87d17/src/style-spec/feature_filter/index.js\n\n'use strict';\n\nmodule.exports = createFilter;\n\nconst types = ['Unknown', 'Point', 'LineString', 'Polygon'];\n\n/**\n * Given a filter expressed as nested arrays, return a new function\n * that evaluates whether a given feature (with a .properties or .tags property)\n * passes its test.\n *\n * @private\n * @param {Array} filter mapbox gl filter\n * @returns {Function} filter-evaluating function\n */\nfunction createFilter(filter) {\n    return new Function('f', `var p = (f && f.properties || {}); return ${compile(filter)}`);\n}\n\nfunction compile(filter) {\n    if (!filter) return 'true';\n    const op = filter[0];\n    if (filter.length <= 1) return op === 'any' ? 'false' : 'true';\n    const str =\n        op === '==' ? compileComparisonOp(filter[1], filter[2], '===', false) :\n        op === '!=' ? compileComparisonOp(filter[1], filter[2], '!==', false) :\n        op === '<' ||\n        op === '>' ||\n        op === '<=' ||\n        op === '>=' ? compileComparisonOp(filter[1], filter[2], op, true) :\n        op === '~=' ? compileRegexOp(filter[1], filter[2]) :\n        op === 'any' ? compileLogicalOp(filter.slice(1), '||') :\n        op === 'all' ? compileLogicalOp(filter.slice(1), '&&') :\n        op === 'none' ? compileNegation(compileLogicalOp(filter.slice(1), '||')) :\n        op === 'in' ? compileInOp(filter[1], filter.slice(2)) :\n        op === '!in' ? compileNegation(compileInOp(filter[1], filter.slice(2))) :\n        op === 'has' ? compileHasOp(filter[1]) :\n        op === '!has' ? compileNegation(compileHasOp(filter[1])) :\n        'true';\n    return `(${str})`;\n}\n\nfunction compilePropertyReference(property) {\n    return property === '$type' ? 'f.type' :\n        property === '$id' ? 'f.id' :\n        `p[${JSON.stringify(property)}]`;\n}\n\nfunction compileComparisonOp(property, value, op, checkType) {\n    const left = compilePropertyReference(property);\n    const right = property === '$type' ? types.indexOf(value) : JSON.stringify(value);\n    return (checkType ? `typeof ${left}=== typeof ${right}&&` : '') + left + op + right;\n}\n\nfunction compileRegexOp(property, value) {\n    const left = compilePropertyReference(property);\n    const right = value;\n    return `${'function(left, right) {' +\n    'if(!left) return false; return left.toString().match(right);' +\n    '}('}${left}, ${right})`;\n}\n\nfunction compileLogicalOp(expressions, op) {\n    return expressions.map(compile).join(op);\n}\n\nfunction compileInOp(property, values) {\n    if (property === '$type') values = values.map((value) => {\n        return types.indexOf(value);\n    });\n    const left = JSON.stringify(values.sort(compare));\n    const right = compilePropertyReference(property);\n\n    if (values.length <= 200) return `${left}.indexOf(${right}) !== -1`;\n\n    return `${'function(v, a, i, j) {' +\n        'while (i <= j) { var m = (i + j) >> 1;' +\n        '    if (a[m] === v) return true; if (a[m] > v) j = m - 1; else i = m + 1;' +\n        '}' +\n    'return false; }('}${right}, ${left},0,${values.length - 1})`;\n}\n\nfunction compileHasOp(property) {\n    return property === '$id' ? '\"id\" in f' : `${JSON.stringify(property)} in p`;\n}\n\nfunction compileNegation(expression) {\n    return `!(${expression})`;\n}\n\n// Comparison function to sort numbers and strings\nfunction compare(a, b) {\n    return a < b ? -1 : a > b ? 1 : 0;\n}\n","'use strict';\n\nconst vt = require('@mapbox/vector-tile');\nconst Protobuf = require('pbf');\nconst GeoJSONFeature = require('mapbox-gl/src/util/vectortile_to_geojson');\nconst featureFilter = require('./feature_filter');\n\nmodule.exports = {\n\n    querySourceFeatures(sourceID, params, map) {\n        const sourceCache = map.style.sourceCaches[sourceID];\n\n         //from: https://github.com/mapbox/mapbox-gl-js/blob/5886421ea9a5ae26797c950ec698be473fe87d17/src/source/query_features.js#L25\n        const tiles = sourceCache.getRenderableIds().map((id) => {\n            return sourceCache.getTileByID(id);\n        });\n\n        const result = [];\n\n        const dataTiles = {};\n        for (let i = 0; i < tiles.length; i++) {\n            const tile = tiles[i];\n            const dataID = tile.tileID.canonical.key;\n            if (!dataTiles[dataID]) {\n                dataTiles[dataID] = true;\n                this.queryTile(result, params, tile);\n            }\n        }\n\n        return result;\n\n    },\n\n    queryTile(result, params, tile) {\n        //from: https://github.com/mapbox/mapbox-gl-js/blob/5886421ea9a5ae26797c950ec698be473fe87d17/src/source/tile.js#L175\n        if (!tile.rawTileData) return;\n\n        if (!tile.vtLayers) {\n            tile.vtLayers = new vt.VectorTile(new Protobuf(tile.rawTileData)).layers;\n        }\n\n        const sourceLayer = params ? params.sourceLayer : '';\n        const layer = tile.vtLayers._geojsonTileLayer || tile.vtLayers[sourceLayer];\n\n        if (!layer) return;\n\n        const filter = featureFilter(params && params.filter);\n        const coord = { z: tile.tileID.overscaledZ, x: tile.tileID.canonical.x, y: tile.tileID.canonical.y };\n\n        for (let i = 0; i < layer.length; i++) {\n            const feature = layer.feature(i);\n            if (filter(feature)) {\n                const geojsonFeature = new GeoJSONFeature(feature, coord.z, coord.x, coord.y);\n                geojsonFeature.tile = coord;\n                result.push(geojsonFeature);\n            }\n        }\n    }\n\n};\n"]}